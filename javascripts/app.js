(function(){"use strict";var a=typeof window=="undefined"?global:window;if(typeof a.require=="function")return;var b={},c={},d={}.hasOwnProperty,e={},f=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},g=function(a,b){var c=0;b&&(b.indexOf(!1)&&(c="components/".length),b.indexOf("/",c)>0&&(b=b.substring(c,b.indexOf("/",c))));var d=e[a+"/index.js"]||e[b+"/deps/"+a+"/index.js"];return d?"components/"+d.substring(0,d.length-".js".length):a},h=function(){var a=/^\.\.?(\/|$)/;return function(b,c){var d=[],e,f;e=(a.test(c)?b+"/"+c:c).split("/");for(var g=0,h=e.length;g<h;g++)f=e[g],f===".."?d.pop():f!=="."&&f!==""&&d.push(f);return d.join("/")}}(),i=function(a){return a.split("/").slice(0,-1).join("/")},j=function(b){return function(c){var d=h(i(b),c);return a.require(d,b)}},k=function(a,b){var d={id:a,exports:{}};return c[a]=d,b(d.exports,j(a),d),d.exports},l=function(a,e){var f=h(a,".");e==null&&(e="/"),f=g(a,e);if(d.call(c,f))return c[f].exports;if(d.call(b,f))return k(f,b[f]);var i=h(f,"./index");if(d.call(c,i))return c[i].exports;if(d.call(b,i))return k(i,b[i]);throw new Error('Cannot find module "'+a+'" from '+'"'+e+'"')};l.alias=function(a,b){e[b]=a},l.register=l.define=function(a,c){if(typeof a=="object")for(var e in a)d.call(a,e)&&(b[e]=a[e]);else b[a]=c},l.list=function(){var a=[];for(var c in b)d.call(b,c)&&a.push(c);return a},l.brunch=!0,a.require=l})(),require.register("initialize",function(a,b,c){((function(){var a,c,d;a=b("router"),d=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q;assert(_EXPLORER_DATASET!==null,"Failed to load dataset."),e=0,E=_EXPLORER_DATASET.groupings;for(k=0,o=E.length;k<o;k++){i=E[k],I=i.entries;for(l=0,q=I.length;l<q;l++)j=I[l],j.group_id=e++}e=0,J=_EXPLORER_DATASET.question;for(h in J){g=J[h],g.groups=[],K=_EXPLORER_DATASET.groupings;for(m=0,r=K.length;m<r;m++){a=K[m],L=a.entries;for(n=0,s=L.length;n<s;n++)d=L[n],d.qs.contains(h)&&g.groups.push("group-"+d.group_id)}}c={name:"Entire World",contains:[]},M=_EXPLORER_DATASET.country;for(y=0,t=M.length;y<t;y++)b=M[y],c.contains.push(b.alpha2);_EXPLORER_DATASET.regions.unshift(c);for(f in _EXPLORER_DATASET.regions)_EXPLORER_DATASET.regions[f].region_index=parseInt(f);e=0,N=_EXPLORER_DATASET.groupings_old;for(z=0,u=N.length;z<u;z++){i=N[z],O=i.entries;for(A=0,v=O.length;A<v;A++)j=O[A],j.group_id=e++}e=0,P=_EXPLORER_DATASET.question_old;for(h in P){g=P[h],g.groups=[],F=_EXPLORER_DATASET.groupings_old;for(B=0,w=F.length;B<w;B++){a=F[B],G=a.entries;for(C=0,x=G.length;C<x;C++)d=G[C],d.qs.contains(h)&&g.groups.push("group-"+d.group_id)}}c={name:"Entire World",contains:[]},H=_EXPLORER_DATASET.country_old;for(D=0,p=H.length;D<p;D++)b=H[D],c.contains.push(b.alpha2);_EXPLORER_DATASET.regions_old.unshift(c),Q=[];for(f in _EXPLORER_DATASET.regions_old)Q.push(_EXPLORER_DATASET.regions_old[f].region_index=parseInt(f));return Q},c=function(){var a,b;return b="#aaa",jsPlumb.importDefaults({Anchors:["RightMiddle","LeftMiddle"],PaintStyle:{strokeStyle:b,lineWidth:2},Endpoint:"Blank",EndpointStyle:{radius:9,fillStyle:b},Connector:["Bezier",{curviness:30}]}),a={foldback:.8,fillStyle:b,width:9,length:10},jsPlumb._custom_overlay=[["Arrow",{location:.5},a]]},$(function(){var b;return c(),d(),b=new a,Backbone.history.start()})})).call(this)}),require.register("router",function(a,b,c){((function(){var a,d,e,f,g,h,i,j,k,l,m,n=function(a,b){return function(){return a.apply(b,arguments)}},o=Object.prototype.hasOwnProperty,p=function(a,b){function d(){this.constructor=a}for(var c in b)o.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("views/page/map"),k=b("views/page/timeline"),h=b("views/page/rankings"),d=b("views/page/download"),g=b("views/page/profile"),a=b("views/page/availability"),j=b("views/page/splash"),f=b("views/page/participation"),l=b("views/reportgenerator"),m={mapPage:function(){return this._map=this._map||new e},timelinePage:function(){return this._timeline=this._timeline||new k},rankingsPage:function(){return this._rankings=this._rankings||new h},availabilityPage:function(){return this._avail=this._avail||new a},downloadPage:function(){return this._download=this._download||new d},splashPage:function(){return this._splash=this._splash||new j},participationPage:function(){return this._participation=this._participation||new f}},c.exports=i=function(a){function b(){this.setCurrent=n(this.setCurrent,this),b.__super__.constructor.apply(this,arguments)}return p(b,a),b.prototype.routes={"":"home",home:"home",map:"map",timeline:"timeline",rankings:"rankings",availability:"availability",download:"download",participation:"participation",profile:"profile","profile/:country":"profile"},b.prototype.initialize=function(){var a=this;return l.render($("#report-generator")),l.setInitialState(),this.on("all",function(a){var b,c;c=window.location.hash.slice(1),a=a.split(":");if(a[0]==="route")return $("#main-nav li").removeClass("active"),b=$('#main-nav li a[href$="#'+c+'"]'),b.length===0&&(b=$('#main-nav li a[href$="#'+a[1]+'"]')),b=$(b.parents("li")[0]),b.add(b.parents(".dropdown")).addClass("active")})},b.prototype.setCurrent=function(a,b){return b==null&&(b=!0),a!==this.currentView&&(this.currentView=a,a.renderPage($("#explorer"))),b?$("#report-generator").show():$("#report-generator").hide()},b.prototype.home=function(){var a;return this.setCurrent(m.splashPage(),a=!1)},b.prototype.map=function(){return this.setCurrent(m.mapPage())},b.prototype.timeline=function(){var a;return this.setCurrent(m.timelinePage(),a=!1)},b.prototype.rankings=function(){return this.setCurrent(m.rankingsPage())},b.prototype.availability=function(){var a;return this.setCurrent(m.availabilityPage(),a=!1)},b.prototype.download=function(){return this.setCurrent(m.downloadPage())},b.prototype.participation=function(){var a;return this.setCurrent(m.participationPage(),a=!1)},b.prototype.profile=function(a){return a==null&&(a=""),this.setCurrent(new g(a))},b}(Backbone.Router)})).call(this)}),require.register("util",function(a,b,c){((function(){c.exports={sortFunction:function(a,b){var c;return c=b.score-a.score,c?c:a.country.localeCompare(b.country)},sortFunctionByName:function(a,b){var c;return c=a.country.localeCompare(b.country),c||(c=b.score-a.score),c}}})).call(this)}),require.register("views/page/availability",function(a,b,c){((function(){var a,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};e=b("views/templates/page/availability"),f=b("views/templates/availability_row"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this.clickregion=g(this.clickregion,this),this._repaint=g(this._repaint,this),this._yearToggle=g(this._yearToggle,this),this.renderPage=g(this.renderPage,this),b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.regionId=[0],b.prototype.initialize=function(){},b.prototype.renderPage=function(a){return d.update("2015",!1),this.$el.html(e()),a.html(this.$el),$("#year-toggles button").click(this._yearToggle),$('button[data-year="2015"]').click(),$(".av-region-toggler").click(this.clickregion)},b.prototype._yearToggle=function(a){var b,c,e,f;return f=$(a.delegateTarget),c=$("#year-toggles button.active").attr("data-year"),b=f.attr("data-year"),e=c==="2015"||b==="2015",$("#year-toggles button").removeClass("active"),f.addClass("active"),this.year=$(a.delegateTarget).attr("data-year"),e&&d.update(this.year,!1),this._repaint()},b.prototype._findScore=function(a,b,c){var d,e,f;for(e=0,f=a.length;e<f;e++){d=a[e];if(d.alpha2===b)return d[c]}return assert(!1,"couldnt find country: "+b)},b.prototype._repaint=function(a,b,c){var e,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;a==null&&(a=d.dataset),b==null&&(b=d.questionSet),c==null&&(c=d.region),o=$("#availability tbody"),o.empty(),this.year!=="2015"?(i=_EXPLORER_DATASET.regions_old,h=_EXPLORER_DATASET.availability_old):(i=_EXPLORER_DATASET.regions,h=_EXPLORER_DATASET.availability),g=[],v=this.regionId;for(p=0,s=v.length;p<s;p++){m=v[p],w=i[m].contains;for(q=0,t=w.length;q<t;q++)e=w[q],g.push(e)}y=[];for(r=0,u=h.length;r<u;r++){n=h[r],k="db_"+this.year;if(!(k in n))continue;if(x=n[k].alpha2,!(j.call(g,x)>=0))continue;l=n[k],l.score=this._findScore(a,n[k].alpha2,this.year),y.push(o.append(f(l)))}return y},b.prototype.clickregion=function(a){var b,c,d;return a.preventDefault(),d=$(a.delegateTarget),c=parseInt(d.attr("id").replace("region-","")),c===0?(this.regionId=[0],this.$el.find(".av-region-toggler").removeClass("active"),d.addClass("active")):d.hasClass("active")?(d.removeClass("active"),b=this.regionId.indexOf(c),b>=0&&this.regionId.splice(b,1),this.regionId.length===0&&(this.regionId.push(0),this.$el.find("#region-0.av-region-toggler").addClass("active"))):(this.$el.find("#region-0.av-region-toggler").hasClass("active")&&(this.$el.find("#region-0.av-region-toggler").removeClass("active"),b=this.regionId.indexOf(0),b>=0&&this.regionId.splice(b,1)),this.regionId.push(c),d.addClass("active")),this._repaint(),!1},b}(Backbone.View)})).call(this)}),require.register("views/page/download",function(a,b,c){((function(){var a,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};f=b("views/templates/page/download"),e=b("views/templates/download_files"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this._onNavChange=g(this._onNavChange,this),this._repaint=g(this._repaint,this),this.changeyear=g(this.changeyear,this),this.renderPage=g(this.renderPage,this),this.initialize=g(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(){return d.bind("update",this._repaint)},b.prototype.renderPage=function(a){var b,c;return b=!1,$("#accordion2 .accordion-body").hasClass("in")&&(b=!0),this.year="2015",d.update(this.year,b),this.$el.html(f),a.html(this.$el),c=this.$el.find(".dl-nav-select"),c.chosen(),c.val("").trigger("liszt:updated"),c.bind("change",this._onNavChange)},b.prototype.changeyear=function(a){var b,c,e,f,g;return g=$(a.delegateTarget),e=this.year,c=g.attr("value"),f=e==="2015"||c==="2015",this.year=g.attr("value"),this.year==="all"&&(this.year="2006"),f&&(b=!1,$("#accordion2 .accordion-body").hasClass("in")&&(b=!0),d.update(this.year,b)),this._repaint()},b.prototype._writeLine=function(a,b){var c,d,e;for(d=0,e=b.length;0<=e?d<e:d>e;0<=e?d++:d--)c=b[d]||"",assert(!(j.call(c,'"')>=0),"Cannot encode string: "+c),j.call(c,",")>=0&&(b[d]='"'+c+'"');return a.push(b.join(","))},b.prototype._csvQuestions=function(a){var b,c,d,e,f,g;c=[],b=["NUMBER","TEXT","A","B","C","D","E"],this._writeLine(c,b),d=_EXPLORER_DATASET.question;for(f=0,g=a.length;f<g;f++)e=a[f],this._writeLine(c,[e,d[e].text,d[e].a,d[e].b,d[e].c,d[e].d,d[e].e]);return c},b.prototype._number_to_letter=function(a){return"The given letters in the source data arent always there. \n'q102l' does not exist while 'q102' does.\nTherefore it is safer to use this technique to extract a letter...",assert(a===-1||a===0||a===33||a===67||a===100,"Invalid value: "+a),{"-1":"e",0:"d",33:"c",67:"b",100:"a"}[a]},b.prototype._csvAnswers=function(a,b,c){var d,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;this.year!=="2015"?(h=_EXPLORER_DATASET.regions_old,g=_EXPLORER_DATASET.country_old,d=["2006","2008","2010","2012"]):(h=_EXPLORER_DATASET.regions,g=_EXPLORER_DATASET.country,d=["2015"]),k=[],i=["COUNTRY","COUNTRY_NAME","YEAR","SCORE"];for(u=0,y=c.length;u<y;u++)s=c[u],i.push(s.toString());for(v=0,z=c.length;v<z;v++)s=c[v],i.push(s+"l");this._writeLine(k,i),q={};for(w=0,A=g.length;w<A;w++)s=g[w],q[s.alpha2]=s;o=[];for(x=0,B=b.length;x<B;x++){m=b[x],M=h[m].contains;for(H=0,C=M.length;H<C;H++)e=M[H],o.push(e)}for(I=0,D=a.length;I<D;I++){f=a[I];if(N=f.alpha2,j.call(o,N)<0)continue;p=$('input[name="downloadyear"]:checked').val(),j.call(d,p)>=0?p=[p]:p=d;for(J=0,E=p.length;J<E;J++){t=p[J];if(!(t in f))continue;n=[f.alpha2,f.country,t,f[t]];for(K=0,F=c.length;K<F;K++)l=c[K],n.push(q[f.alpha2]["db_"+t][l]);for(L=0,G=c.length;L<G;L++)l=c[L],r=q[f.alpha2]["db_"+t][l],n.push(this._number_to_letter(r));assert(n.length===i.length),this._writeLine(k,n)}}return k},b.prototype._repaint=function(a,b,c){return a==null&&(a=d.dataset),b==null&&(b=d.questionSet),c==null&&(c=d.region),$("#custom-csv").html(this._csvAnswers(a,c,b).join("\n"))},b.prototype._onNavChange=function(a){var b,c,d,f,g=this;f=$(a.delegateTarget).val(),b=$("#dl-mode"),b.empty(),f==="fd"?d={fd:!0,sf:!1,cq:!1,cr:!1,excel:[_EXPLORER_DATASET.downloads_old[0],_EXPLORER_DATASET.downloads[0]],csv:[_EXPLORER_DATASET.downloads_old[1],_EXPLORER_DATASET.downloads[1]],json:[_EXPLORER_DATASET.downloads_old[2],_EXPLORER_DATASET.downloads[2]]}:f==="sf"?d={fd:!1,sf:!0,cq:!1,cr:!1}:f==="cq"?d={fd:!1,sf:!1,cq:!0,cr:!1}:f==="cr"?d={fd:!1,sf:!1,cq:!1,cr:!0}:d={fd:!1,sf:!1,cq:!1,cr:!1},b.append(e(d));if(f==="cr")return $("#custom-csv").bind("click",function(){return $("#custom-csv").select()}),$('input[name="downloadyear"]').bind("change",this.changeyear),this._repaint(),c={filename:function(){return"custom-budget-report.csv"},data:function(){return $("#custom-csv").val()},onComplete:function(){return alert("Your File Has Been Saved!")},onCancel:function(){return null},onError:function(){return alert("Error")},swf:"downloadify.swf",downloadImage:"images/download.png",width:100,height:30,transparent:!0,append:!1},Downloadify.create("downloadify",c)},b}(Backbone.View)})).call(this)}),require.register("views/page/map",function(a,b,c){((function(){var a,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},k=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};g=b("views/templates/page/map"),f=b("views/reportgenerator"),d="world_mill_en",a=["B8282E","F48022","DAC300","007A78","0065A4"],jvm.NumericScale.prototype.getValue=function(b){var c;return c=Math.min(b-1,99),c=(c-c%20)/20,c=a[c],assert(c!==void 0,"Could not process "+b+" ("+c+")"),c},c.exports=e=function(b){function c(){this._clickCountry=h(this._clickCountry,this),this._labelShow=h(this._labelShow,this),this._repaint=h(this._repaint,this),this._mapToggle=h(this._mapToggle,this),this.renderPage=h(this.renderPage,this),this.initialize=h(this.initialize,this),c.__super__.constructor.apply(this,arguments)}return j(c,b),c.prototype.mapData={},c.prototype.countriesInSurvey=[],c.prototype.initialize=function(){return f.bind("update",this._repaint)},c.prototype.renderPage=function(a){var b,c;return $(window).scrollTop(0),this.$el.html(g()),a.html(this.$el),b=this.$el.find("#map"),c=b.vectorMap({map:d,series:{regions:[{}],markers:[{}]},regionStyle:{initial:{stroke:"none","stroke-width":"1.0","stroke-opacity":"0.5",fill:"#cccccc"}},backgroundColor:"#ffffff",onRegionLabelShow:this._labelShow,onRegionClick:this._clickCountry,zoomOnScroll:!1,markerStyle:{initial:{fill:"#cccccc",stroke:"none","stroke-width":"1.0","stroke-opacity":"0.5"},hover:{stroke:"none","fill-opacity":"0.8"}},markers:[],onMarkerLabelShow:this._labelShow,onMarkerClick:this._clickCountry}),this.mapObject=b.vectorMap("get","mapObject"),$("#map-toggles button").click(this._mapToggle),$('button[data-year="2015"]').click()},c.prototype._mapToggle=function(a){var b,c,d,e,g;return g=$(a.delegateTarget),d=$("#map-toggles button.active").attr("data-year"),c=g.attr("data-year"),e=d==="2015"||c==="2015",$("#map-toggles button").removeClass("active"),g.addClass("active"),this.year=$(a.delegateTarget).attr("data-year"),e&&(b=!1,$("#accordion2 .accordion-body").hasClass("in")&&(b=!0),f.update(this.year,b)),this._repaint()},c.prototype._repaint=function(b,c,e){var g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x;b==null&&(b=f.dataset),c==null&&(c=f.questionSet),e==null&&(e=f.region),this.year!=="2015"?j=_EXPLORER_DATASET.regions_old:j=_EXPLORER_DATASET.regions,h=jvm.WorldMap.maps[d].paths,m=[];for(q=0,t=e.length;q<t;q++){l=e[q],w=j[l].contains;for(r=0,u=w.length;r<u;r++)g=w[r],m.push(g)}this.mapData={},this.mapColor={},this.countriesInSurvey=[];for(p in h)this.mapData[p]=-1,this.mapColor[p]=0;if(f.questionSet.length>0)for(s=0,v=b.length;s<v;s++){i=b[s];if(!(i.alpha2 in h||i.alpha2==="ST"))continue;if(x=i.alpha2,!(k.call(m,x)>=0))continue;if(!(this.year in i))continue;o=i[this.year];if(o<0)continue;assert(o>=-1,"Bad mapping value: "+o),this.countriesInSurvey.push(i.alpha2),this.mapColor[i.alpha2]=Math.max(1,o),this.mapData[i.alpha2]=o}return this.mapObject.series.regions[0].setValues(this.mapColor),n=(n-n%20)/20,n=a[n],this.mapObject.removeAllMarkers,this.mapObject.addMarker(0,{latLng:[.33,6.73],name:"São Tomé e Príncipe"},[this.mapColor.ST])},c.prototype._labelShow=function(a,b,c){return this.mapLabel=b,!(k.call(this.countriesInSurvey,c)>=0)&&c!=="0"||c==="0"&&this.year==="2006"?this.mapLabel.css({opacity:"0.5"}):c==="0"&&this.year!=="2006"?(this.mapLabel.css({opacity:"1.0"}),this.mapLabel.html(this.mapLabel.html()+": "+this.mapData.ST)):(this.mapLabel.css({opacity:"1.0"}),this.mapLabel.html(this.mapLabel.html()+": "+this.mapData[c]))},c.prototype._clickCountry=function(a,b){k.call(this.countriesInSurvey,b)>=0&&(this.mapLabel.length&&this.mapLabel.remove(),window.location="#profile/"+b);if(b==="0"&&k.call(this.countriesInSurvey,"ST")>=0)return this.mapLabel.length&&this.mapLabel.remove(),window.location="#profile/ST"},c}(Backbone.View)})).call(this)}),require.register("views/page/participation",function(a,b,c){((function(){var a,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},k=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};e=b("views/templates/page/participation"),f=b("views/templates/participation_row"),d=b("views/templates/participation_comments"),g=b("util"),c.exports=a=function(a){function b(){this._onRegChange=h(this._onRegChange,this),this._onNavChange=h(this._onNavChange,this),this._onClickQuestion=h(this._onClickQuestion,this),this._completeAnswer=h(this._completeAnswer,this),this._boxHeight=h(this._boxHeight,this),this._reflow=h(this._reflow,this),this._sorted=h(this._sorted,this),this._sortByColumn=h(this._sortByColumn,this),this._getCountry=h(this._getCountry,this),this._calculateScore=h(this._calculateScore,this),this._getQuestions=h(this._getQuestions,this),this.renderPage=h(this.renderPage,this),this.initialize=h(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.sortBy="name",b.prototype.initialize=function(){return this.participation=_EXPLORER_DATASET.public_participation},b.prototype.renderPage=function(a){var b,c,d,f,g,h;$(window).scrollTop(0),this.region="0",this.countriesIncluded=[],h=_EXPLORER_DATASET.regions[parseInt(this.region)].contains;for(f=0,g=h.length;f<g;f++)b=h[f],this.countriesIncluded.push(b);return this.renderData={questions:this._getQuestions(),countries:this._getCountry()},this.$el.html(e(this.renderData)),a.html(this.$el),$("th.col2").tooltip({delay:50,animation:!0}),this._reflow(),$(".sortbyname").click(this._sortByColumn),$('.sortbyname[data-sort="'+this.sortBy+'"]').click(),c=this.$el.find("#select-country"),c.chosen(),c.val(this.alpha2).trigger("liszt:updated"),c.bind("change",this._onNavChange),d=this.$el.find("#select-region"),d.chosen(),d.val("").trigger("liszt:updated"),d.bind("change",this._onRegChange)},b.prototype._getQuestions=function(){var a,b,c,d,e,f,g;e=[],a=[114];for(c=119;c<134;c++)a.push(c);for(f=0,g=a.length;f<g;f++)d=a[f],b=_EXPLORER_DATASET.question[d+""],e.push(b);return e},b.prototype._calculateScore=function(a){var b,c,d,e,f,g;b=0,c=0,g=a.question;for(e=0,f=g.length;e<f;e++)d=g[e],parseFloat(d.score)>=0&&(b+=parseFloat(d.score),c++);return c===0?-1:Math.round(b/c)},b.prototype._getCountry=function(){var a,b,c,d,e,f,g,h,i,j,l,m,n;b=[],a=[114];for(e=119;e<134;e++)a.push(e);m=this.participation;for(h=0,j=m.length;h<j;h++){c=m[h];if(n=c.alpha2,k.call(this.countriesIncluded,n)>=0){d={alpha2:c.alpha2,country:c.name,question:[]},f={};for(i=0,l=a.length;i<l;i++)g=a[i],f={number:g+"",score:c[g+""].score,letter:c[g+""].letter,comments:c[g+""].comments},d.question.push(f);d.score=this._calculateScore(d),b.push(d)}}return b},b.prototype._sortByColumn=function(a){var b;return a.preventDefault(),b=$(a.delegateTarget),$(".sortbyname").removeClass("active"),b.addClass("active"),this.sortBy=b.attr("data-sort"),this._reflow(),this.sortBy!=="name"&&this.sortBy!=="score"&&this.$el.find('td[data-question-number="'+this.sortBy+'"].letter').addClass("selected"),!1},b.prototype._sorted=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;l=b.question;for(h=0,j=l.length;h<j;h++)e=l[h],e.number===this.sortBy&&(d=e.score);m=a.question;for(i=0,k=m.length;i<k;i++)f=m[i],f.number===this.sortBy&&(c=f.score);return g=d-c,g?g:a.country.localeCompare(b.country)},b.prototype._reflow=function(){var a,b;return b=$("#participation-table tbody"),b.empty(),a=this.renderData.countries,this.sortBy==="name"?a.sort(g.sortFunctionByName):this.sortBy==="score"?a.sort(g.sortFunction):a.sort(this._sorted),b.append(f(this.renderData)),$("#participation-table .letter").click(this._onClickQuestion)},b.prototype._boxHeight=function(a){var b,c,d,e;return e=$(".comments-box."+a+" .question .question-text").height(),c=$(".comments-box."+a+" .comments .comments-text").height(),e>c?$(".comments-box."+a+" .comments .comments-text").height(e):$(".comments-box."+a+" .question .question-text").height(c),d=$(".comments-box."+a+" .question").height(),b=$(".comments-box."+a+" .comments").height(),d>b?$(".comments-box."+a+" .comments").height(d):$(".comments-box."+a+" .question").height(b)},b.prototype._completeAnswer=function(a,b){var c,d,e,f,g,h,i,j,k;f=_EXPLORER_DATASET.question[b],c=this._getCountry();for(g=0,i=c.length;g<i;g++){e=c[g];if(e.alpha2===a){k=e.question;for(h=0,j=k.length;h<j;h++)d=k[h],d.number===b&&(f.comments=d.comments)}}return f},b.prototype._onClickQuestion=function(a){var b,c,e,f,g;return g=$(a.delegateTarget),e=g.attr("data-question-number"),c=g.parent("tr").attr("id"),b=$(".comments-box."+c),this.sortBy===e?g.hasClass("active")?(g.removeClass("active"),g.addClass("inactive"),b.empty()):(g.removeClass("inactive"),g.addClass("active"),f=this._completeAnswer(c,e),b.append(d(f)),this._boxHeight(c)):($(".comments-box").empty(),this.$el.find("td.letter.active").removeClass("active").addClass("inactive"),$('.sortbyname[data-sort="'+e+'"]').click(),$("html, body").animate({scrollTop:$("#"+c).offset().top},500),g=$('tr[id="'+c+'"] td[data-question-number="'+e+'"]'),g.removeClass("inactive"),g.addClass("active"),f=this._completeAnswer(c,e),b=$(".comments-box."+c),b.append(d(f)),this._boxHeight(c))},b.prototype._onNavChange=function(a){var b;b=$(a.delegateTarget).val();if(b.length===2)return $("#"+b).css("background-color","rgba(84, 169, 84, 0.2)"),$("html, body").animate({scrollTop:$("#"+b).offset().top},500),$("#"+b).animate({backgroundColor:"rgba(255, 255, 255, 0.2)"},4e3),$(a.delegateTarget).val("").trigger("liszt:updated")},b.prototype._onRegChange=function(a){var b,c,d,f,g,h,i;f=$(a.delegateTarget).val().replace("region-",""),this.region=f,this.region||(this.region="0"),this.countriesIncluded=[],i=_EXPLORER_DATASET.regions[parseInt(this.region)].contains;for(g=0,h=i.length;g<h;g++)b=i[g],this.countriesIncluded.push(b);return this.renderData={questions:this._getQuestions(),countries:this._getCountry()},this.$el.html(e(this.renderData)),$("th.col2").tooltip({delay:50,animation:!0}),this._reflow(),$(".sortbyname").click(this._sortByColumn),$('.sortbyname[data-sort="'+this.sortBy+'"]').click(),c=this.$el.find("#select-country"),c.chosen(),c.val(this.alpha2).trigger("liszt:updated"),c.bind("change",this._onNavChange),d=this.$el.find("#select-region"),d.chosen(),d.val("region-"+this.region).trigger("liszt:updated"),d.bind("change",this._onRegChange)},b}(Backbone.View)})).call(this)}),require.register("views/page/profile",function(a,b,c){((function(){var a,d,e,f,g,h,i,j,k=function(a,b){return function(){return a.apply(b,arguments)}},l=Object.prototype.hasOwnProperty,m=function(a,b){function d(){this.constructor=a}for(var c in b)l.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("views/templates/page/profile"),i=b("views/templates/profile_percentages"),g=b("views/templates/profile_details"),h=b("views/templates/profile_details_future"),j=b("views/templates/question_text"),f=b("views/templates/profile_badges"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this._animationHackScale=k(this._animationHackScale,this),this._repaint2014=k(this._repaint2014,this),this._onClick2014=k(this._onClick2014,this),this._onToggleMode=k(this._onToggleMode,this),this._repaint=k(this._repaint,this),this._yearToggle=k(this._yearToggle,this),this.renderPage=k(this.renderPage,this),this.initialize=k(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.initialize=function(a){return this.alpha2=a,this.year="2015",this.data=this.lookup(this.alpha2),this.db_2017=$.extend({},this.data.db_2015),d.bind("update",this._repaint),this.years=[2015]},b.prototype.lookup=function(a){"Look up a country object by alpha2 code";var b,c,d,e;this.year!=="2015"?b=_EXPLORER_DATASET.country_old:b=_EXPLORER_DATASET.country;for(d=0,e=b.length;d<e;d++){c=b[d];if(c.alpha2===a)return c}return a===""?{}:assert(!1,a+" is not a valid country code.")},b.prototype.renderPage=function(a){var b,c,f;return b=!1,$("#accordion2 .accordion-body").hasClass("in")&&(b=!0),this.year=$("#datasheet-toggles button.active").attr("data-year")||"2015",d.update(this.year,b),$(window).scrollTop(0),f={alpha2:this.alpha2,countries:_EXPLORER_DATASET.country,data:this.data,empty:this.alpha2==="",main_website_url:this._ibp_website_url(this.alpha2),years:this.years},this.viewPast=!0,this.$el.html(e(f)),a.html(this.$el),this._repaint(),c=this.$el.find(".country-nav-select"),c.chosen(),c.val(this.alpha2).trigger("liszt:updated"),c.bind("change",this._onNavChange),$("#datasheet-toggles button").click(this._yearToggle),this.year==="2015"?$('button[data-year="2015"]').click():$('button[data-year="2006"]').click()},b.prototype._yearToggle=function(a){var b,c,e;return e=$(a.delegateTarget),$("#datasheet-toggles button").removeClass("active"),e.addClass("active"),this.year=$(a.delegateTarget).attr("data-year"),this.year==="2015"?(this.years=[2015],b={years:this.years,last:!0}):(this.years=[2006,2008,2010,2012],b={years:this.years,last:!1}),$("#profile-mode").empty().append($(f(b))),this.year==="2015"&&$("#profile-toggle").click(this._onToggleMode),this.year==="2006"&&this.alpha2==="HU"?this.data={alpha2:"HU",name:"Hungary"}:this.data=this.lookup(this.alpha2),c=!1,$("#accordion2 .accordion-body").hasClass("in")&&(c=!0),d.update(this.year,c),this._onToggleMode()},b.prototype._repaint=function(a,b){var c,e,f,j,k,l,m,n,o;a==null&&(a=d.dataset),b==null&&(b=d.questionSet),this.year!=="2015"?e={percentages:[this._get_percentages(this.data.alpha2,this.data.db_2006,"2006",b),this._get_percentages(this.data.alpha2,this.data.db_2008,"2008",b),this._get_percentages(this.data.alpha2,this.data.db_2010,"2010",b),this._get_percentages(this.data.alpha2,this.data.db_2012,"2012",b)]}:e={percentages:[this._get_percentages(this.data.alpha2,this.data.db_2015,"2015",b)]},$(".percentages").empty().append($(i(e))),$(".percentbar").tooltip({placement:"right",delay:50,animation:!0}),c=this._get_details(this.data,b);if(this.viewPast)$(".past").show(),$(".future").hide(),$(".details").html(g(c));else{$(".future").show(),$(".past").hide(),$(".details").html(h(c)),$(".letter.multi img").bind("click",this._onClick2014),this._repaint2014,o=$(".question-row");for(m=0,n=o.length;m<n;m++)l=o[m],l=$(l),f=l.attr("data-question-number"),k=this.db_2017[f],l.find('img[data-score="'+k+'"]').removeClass("inactive").addClass("active")}return this._repaint2014(),this.$el.find("tr.question-row").mouseover(this._onHoverQuestion),this.$el.find("tr.question-row:first").mouseover(),j=function(a,b){return b!==void 0?($(".scores .year-"+a).css("opacity","1.0"),$(".scores .year-"+a+" .bottom").text("Score: "+b)):($(".scores .year-"+a).css("opacity","0.2"),$(".scores .year-"+a+" .bottom").text("-"))},this.year!=="2015"?(j(2006,e.percentages[0].score),j(2008,e.percentages[1].score),j(2010,e.percentages[2].score),j(2012,e.percentages[3].score)):j(2015,e.percentages[0].score),this._repaint2014()},b.prototype._ibp_website_url=function(a){return a==="BJ"&&(a="benin"),a==="QA"||a==="TN"||a==="MM"?"":"http://internationalbudget.org/what-we-do/open-budget-survey/country-info/?country="+a.toLowerCase()},b.prototype._onHoverQuestion=function(a){var b,c,d,e,f,g,h,i,k;return i=$(a.delegateTarget),$("#datasheet-toggles button.active").attr("data-year")==="2015"?b=_EXPLORER_DATASET.question:b=_EXPLORER_DATASET.question_old,e=i.attr("data-question-number"),h={t3pbs:"134",t3ebp:"135",t3eb:"136",t3iyr:"137",t3myr:"138",t3yer:"139",t3ar:"140"},e in h?(d=h[e],f=b[d]):f=b[e],g=$(".question-box"),g.html(j(f)),k=i.position().top-21,c=$(".details").height()-g.height()-21,g.css({left:$(".details table").width(),top:Math.max(0,Math.min(k,c))}),$("tr.question-row").removeClass("hover"),i.addClass("hover")},b.prototype._onNavChange=function(a){var b;return b=$(a.delegateTarget).val(),b.length===0?window.location="#profile":(assert(b.length===2,"Invalid country code: "+b),window.location="#profile/"+b)},b.prototype._number_to_letter=function(a,b){"The given letters in the source data arent always there. \n'q102l' does not exist while 'q102' does.\nTherefore it is safer to use this technique to extract a letter...";var c;return a===void 0?"":(b in a?(c=a[b],assert(c===-1||c===0||c===33||c===67||c===100,"Invalid value: "+c)):c="-1",{"-1":"e",0:"d",33:"c",67:"b",100:"a"}[c])},b.prototype._get_percentages=function(a,b,c,e){var f,g,h,i,j,k,l,m,n;if(b===void 0)return{year:c,not_defined:!0};h={total:e.length,year:c,a:0,b:0,c:0,d:0,e:0},n=d.dataset;for(j=0,l=n.length;j<l;j++)i=n[j],i.alpha2===a&&(h.score=i[c],h.score<0&&(h.score="N/A"));for(k=0,m=e.length;k<m;k++)f=e[k],g=this._number_to_letter(b,f),assert(g==="a"||g==="b"||g==="c"||g==="d"||g==="e"),h[g]++;return assert(h.a+h.b+h.c+h.d+h.e===h.total,"Integrity problem in profile calculation"),h.a_width=h.a*100/h.total,h.b_width=(h.a+h.b)*100/h.total,h.c_width=(h.a+h.b+h.c)*100/h.total,h.d_width=(h.a+h.b+h.c+h.d)*100/h.total,h.e_width=100,h},b.prototype._get_details=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;e={questions:[],years:this.years},this.years[0]===2015?e.last=!0:e.last=!1;for(i=0,k=b.length;i<k;i++){f=b[i],d={number:f},m=this.years;for(j=0,l=m.length;j<l;j++)g=m[j],h="l"+g,c="db_"+g,d[h]=this._number_to_letter(a[c],f);e.questions.push(d)}return e},b.prototype._onToggleMode=function(a){var b,c,d;a&&(a.preventDefault(),$("#profile-toggle").hasClass("inactive")?($("#profile-toggle").removeClass("inactive"),$("#profile-toggle").addClass("active"),$("#profile-toggle").html("« Hide 2017 Calculator")):$("#profile-toggle").hasClass("active")&&($("#profile-toggle").removeClass("active"),$("#profile-toggle").addClass("inactive"),$("#profile-toggle").html("Show 2017 Calculator »"))),d=this.viewPast,this.viewPast=!$("#profile-toggle").hasClass("active"),b=d!==this.viewPast,this._repaint(),c=$(".explanation");if(!!this.viewPast)return c.hide();c.show();if(b)return $(".future").css("opacity",0).animate({opacity:1},300)},b.prototype._onClick2014=function(a){var b,c,d,e;return b=$(a.delegateTarget),e=b.parents("tr:first"),c=e.attr("data-question-number"),d=b.attr("data-score"),e.find("img").removeClass("active").addClass("inactive"),b.removeClass("inactive").addClass("active"),this.db_2017[c]=parseInt(d),this._repaint2014(),this._animationHackScale($(".year-box.year-2017"))},b.prototype._repaint2014=function(){var a;return a=d.calculateScore(this.db_2017,d.questionSet),a=Math.round(a),$(".scores .year-2017 .bottom").text("Score: "+a)},b.prototype._animationHackScale=function(a,b,c){var d=this;return b==null&&(b=1.3),c==null&&(c=340),"Hacky function to make an element pulse to a new scale and back again.\nFollows a SIN wave. Looks like a heartbeat. Overwrites the font-size property. Hence hacky.",a=$(a),a.css("font-size",100),a.animate({"font-size":0},{duration:c,easing:"linear",step:function(c,d){var e,f;return e=c*Math.PI/100,e=1+Math.sin(e)*(b-1),f="scale("+e+","+e+")",a.css({"-moz-transform":f,"-o-transform":f,"-ms-transform":f,"-webkit-transform":f,transform:f})}})},b}(Backbone.View)})).call(this)}),require.register("views/page/rankings",function(a,b,c){((function(){var a,d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k=Object.prototype.hasOwnProperty,l=function(a,b){function d(){this.constructor=a}for(var c in b)k.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},m=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};f=b("views/templates/page/rankings"),g=b("views/templates/rankings_row"),h=b("views/templates/rankings_tooltip"),i=b("util"),e=b("views/reportgenerator"),a=["#B7282E","#F58024","#DAC402","#22aa33"],c.exports=d=function(a){function b(){this._reflow=j(this._reflow,this),this._sortByNameToggle=j(this._sortByNameToggle,this),this._rankingsToggle=j(this._rankingsToggle,this),this.renderPage=j(this.renderPage,this),this.initialize=j(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.sortByName=!1,b.prototype.initialize=function(){return e.bind("update",this._reflow)},b.prototype.renderPage=function(a){return $(window).scrollTop(0),this.$el.html(f()),a.html(this.$el),$(".sortbyname").click(this._sortByNameToggle),$('.sortbyname[data-sortbyname="'+this.sortByName+'"]').addClass("active"),$("#rankings-toggles button").click(this._rankingsToggle),$('button[data-year="2015"]').click()},b.prototype._rankingsToggle=function(a){var b,c,d,f,g;return g=$(a.delegateTarget),d=$("#rankings-toggles button.active").attr("data-year"),c=g.attr("data-year"),f=d==="2015"||c==="2015",$("#rankings-toggles button").removeClass("active"),g.addClass("active"),this.year=$(a.delegateTarget).attr("data-year"),f&&(b=!1,$("#accordion2 .accordion-body").hasClass("in")&&(b=!0),e.update(this.year,b)),this._reflow()},b.prototype._count=function(a,b,c){var d,e,f,g;e=0;for(f=0,g=c.length;f<g;f++)d=c[f],a[d]===b&&e++;return e},b.prototype._findScore=function(a,b,c){var d,e,f;for(e=0,f=a.length;e<f;e++){d=a[e];if(d.alpha2===b)return d[c]}},b.prototype._sortByNameToggle=function(a){var b;return a.preventDefault(),b=$(a.delegateTarget),$(".sortbyname").removeClass("active"),b.addClass("active"),this.sortByName=b.attr("data-sortbyname")==="true",this._reflow(),!1},b.prototype._reflow=function(a,b,c){var d,f,h,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;a==null&&(a=e.dataset),b==null&&(b=e.questionSet),c==null&&(c=e.region),this.year!=="2015"?(k=_EXPLORER_DATASET.regions_old,j=_EXPLORER_DATASET.country_old):(k=_EXPLORER_DATASET.regions,j=_EXPLORER_DATASET.country),r=$("#rankings-table tbody").empty();if(b.length===0){r.html('<p style="margin: 4px 15px; font-weight: bold; min-width: 400px;">(No questions selected)</p>');return}h=[],q=[];for(s=0,w=c.length;s<w;s++){p=c[s],A=k[p].contains;for(t=0,x=A.length;t<x;t++)d=A[t],q.push(d)}for(u=0,y=j.length;u<y;u++){f=j[u];if(!("db_"+this.year in f))continue;if(B=f.alpha2,!(m.call(q,B)>=0))continue;l=f["db_"+this.year],o={country:f.name,alpha2:f.alpha2,score:this._findScore(a,f.alpha2,this.year),a:this._count(l,100,b),b:this._count(l,67,b),c:this._count(l,33,b),d:this._count(l,0,b),e:this._count(l,-1,b)},o.total=o.a+o.b+o.c+o.d+o.e,o.a_width=o.a*100/o.total,o.b_width=o.b*100/o.total,o.c_width=o.c*100/o.total,o.d_width=o.d*100/o.total,o.e_width=o.e*100/o.total,o.b_left=o.a_width,o.c_left=o.b_width+o.b_left,o.d_left=o.c_width+o.c_left,o.e_left=o.d_width+o.d_left,h.push(o)}this.sortByName?h.sort(i.sortFunctionByName):h.sort(i.sortFunction);for(v=0,z=h.length;v<z;v++)o=h[v],o.score<0&&(o.score="N/A"),n=$(g(o)).appendTo(r);return $(".percentbar").tooltip({placement:"right",delay:50,animation:!0})},b}(Backbone.View)})).call(this)}),require.register("views/page/splash",function(a,b,c){((function(){var a,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("views/templates/page/splash"),c.exports=a=function(a){function b(){this.renderPage=e(this.renderPage,this),this.initialize=e(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.initialize=function(){},b.prototype.renderPage=function(a){return this.$el.html(d()),a.html(this.$el)},b}(Backbone.View)})).call(this)}),require.register("views/page/timeline",function(a,b,c){((function(){var a,d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}},j=Object.prototype.hasOwnProperty,k=function(a,b){function d(){this.constructor=a}for(var c in b)j.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},l=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};e=b("views/templates/page/timeline"),f=b("views/templates/timeline_column"),g=b("views/templates/timeline_column_abbr"),h=b("util"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this._redrawJsPlumb=i(this._redrawJsPlumb,this),this._mouseoverRanking=i(this._mouseoverRanking,this),this._updateReport=i(this._updateReport,this),this._buildRankingTable=i(this._buildRankingTable,this),this._onToggleMode=i(this._onToggleMode,this),this._initializeReport=i(this._initializeReport,this),this.renderPage=i(this.renderPage,this),this.initialize=i(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return k(b,a),b.prototype.initialize=function(){return this._initializeReport()},b.prototype.renderPage=function(a){var b;return b=!1,$("#accordion2 .accordion-toggle").hasClass("collapsed")&&(b=!0),d.update("2015",b,!0),$(window).scrollTop(0),this.$el.html(e()),a.html(this.$el),$('input[name="timeline"]').bind("change",this._onToggleMode),this._updateReport()},b.prototype._initializeReport=function(){var a,b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;d.update("2015",!1,!0),e={dataset:d.dataset,region:d.region,dataset_unrounded:d.dataset_unrounded},d.update("2006",!1,!0),g={dataset:d.dataset,dataset_unrounded:d.dataset_unrounded},this.timelineReport={dataset:[],region:e.region,dataset_unrounded:[]},p=e.dataset_unrounded;for(h=0,l=p.length;h<l;h++){b=p[h],a=!1,q=g.dataset_unrounded;for(i=0,m=q.length;i<m;i++)c=q[i],b.alpha2===c.alpha2&&(a=!0,f={alpha2:b.alpha2,country:b.country},"2006"in c&&(f[2006]=c[2006]),"2008"in c&&(f[2008]=c[2008]),"2010"in c&&(f[2010]=c[2010]),"2012"in c&&(f[2012]=c[2012]),f[2015]=b[2015],this.timelineReport.dataset_unrounded.push(f));a||(f={alpha2:b.alpha2,country:b.country},f[2015]=b[2015],this.timelineReport.dataset_unrounded.push(f))}r=e.dataset,t=[];for(j=0,n=r.length;j<n;j++){b=r[j],a=!1,s=g.dataset;for(k=0,o=s.length;k<o;k++)c=s[k],b.alpha2===c.alpha2&&(a=!0,f={alpha2:b.alpha2,country:b.country},"2006"in c&&(f[2006]=c[2006]),"2008"in c&&(f[2008]=c[2008]),"2010"in c&&(f[2010]=c[2010]),"2012"in c&&(f[2012]=c[2012]),f[2015]=b[2015],this.timelineReport.dataset.push(f));a?t.push(void 0):(f={alpha2:b.alpha2,country:b.country},f[2015]=b[2015],t.push(this.timelineReport.dataset.push(f)))}return t},b.prototype._onToggleMode=function(a){var b;return a==null&&(a=!0),b=$('input[name="timeline"]:checked').val(),assert(b==="rankings"||b==="scores"),b==="rankings"?($(".timeline-cell-score").hide(),$(".timeline-cell-rank").show()):($(".timeline-cell-rank").hide(),$(".timeline-cell-score").show())},b.prototype._buildRankingTable=function(a,b,c){var d,e,f,g,i,j,k,m,n,o,p,q,r,s;i=[];for(d in b){g=b[d];if(!(a in g))continue;if(r=g.alpha2,!(l.call(c,r)>=0))continue;g.score=g[a],i.push(g)}i.sort(h.sortFunction),j=0,e=999,f=0,k=[];for(n=0,p=i.length;n<p;n++)m=i[n],f+=1,m.score<e?(e=m.score,j=f):k.push(m.score),m.rank=j;for(o=0,q=i.length;o<q;o++){m=i[o],m.score<0&&(m.rank="N/A",m.score="N/A");if(s=m.score,l.call(k,s)>=0)m.rank="= "+m.rank;m.score=Math.round(m.score)}return i},b.prototype._updateReport=function(a,b,c){var d,e,h,i,j,k,l,m,n,o,p,q,r,s;a==null&&(a=this.timelineReport.dataset),b==null&&(b=this.timelineReport.region),c==null&&(c=this.timelineReport.dataset_unrounded),j=$("#timeline-columns");if(j.length===0)return;e="",i=[];for(l=0,o=b.length;l<o;l++){h=b[l],r=_EXPLORER_DATASET.regions[h].contains;for(m=0,p=r.length;m<p;m++)d=r[m],i.push(d)}s=[2006,2008,2010,2012];for(n=0,q=s.length;n<q;n++)k=s[n],e+=g({year:k,data:this._buildRankingTable(k,c,i)});return e+=f({year:2015,data:this._buildRankingTable(2015,c,i)}),j.html(e),j.find("tr").bind("mouseover",this._mouseoverRanking),this.mouseoverAlpha2||(this.mouseoverAlpha2=$("#timeline-column-2015 tbody tr:first-child").attr("data-alpha2")),this._redrawJsPlumb(),this._onToggleMode()},b.prototype._mouseoverRanking=function(a){var b,c;c=$(a.delegateTarget),b=c.attr("data-alpha2");if(b&&b!==this.mouseoverAlpha2)return this._redrawJsPlumb(b)},b.prototype._redrawJsPlumb=function(a){var b;a==null&&(a=null),a&&(this.mouseoverAlpha2=a),$(".hover").removeClass("hover"),b=$(".timeline-row-"+this.mouseoverAlpha2);if(!b.length)return;return b.addClass("hover"),jsPlumb.deleteEveryEndpoint(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){var a,c;for(a=0,c=b.length-1;0<=c?a<c:a>c;0<=c?a++:a--)jsPlumb.connect({source:b[a],target:b[a+1],overlays:jsPlumb._custom_overlay});return this.timeout=null},50)},b}(Backbone.View)})).call(this)}),require.register("views/reportgenerator",function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},i=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};e=b("views/templates/reportgenerator"),d=!1,a=function(a){function b(){this._download=f(this._download,this),this._csvAnswers=f(this._csvAnswers,this),this._number_to_letter=f(this._number_to_letter,this),this._writeLine=f(this._writeLine,this),this._clickBoxToggle=f(this._clickBoxToggle,this),this._clickRegionToggle=f(this._clickRegionToggle,this),this._clickGroupToggle=f(this._clickGroupToggle,this),this._setSubtitle=f(this._setSubtitle,this),this._expand_collapse=f(this._expand_collapse,this),this._select_or_clear=f(this._select_or_clear,this),this._updated=f(this._updated,this),this.update=f(this.update,this),this.calculateScore=f(this.calculateScore,this),this.render=f(this.render,this),this.setInitialState=f(this.setInitialState,this),this.debugReports=f(this.debugReports,this),this.initialize=f(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(){return d&&this.debugReports(),this.region=[0],this.year="2015"},b.prototype.debugReports=function(){var a,b,c,d,e,f,g,h,i,j,k;c=_EXPLORER_DATASET.groupings[0].entries[0].qs,j=_EXPLORER_DATASET.country;for(f=0,h=j.length;f<h;f++){a=j[f],k=["db_2006","db_2008","db_2010","db_2012","db_2015"];for(g=0,i=k.length;g<i;g++)e=k[g],e in a&&(d=this.calculateScore(a[e],c),b=a[e].obi,Math.round(b*100)!==Math.round(d*100)&&console.warn("Warning "+a.name+"."+e+" failed data integrity test. Expected OBI="+b+"; I calculated "+d))}return console.log("[debug] Data integrity check complete.")},b.prototype.setInitialState=function(){return this.$el.find("#group-0").click()},b.prototype.render=function(a){var b,c,d,f,g,h,i=this;this.year!=="2015"?(c={groupings0:_EXPLORER_DATASET.groupings_old.slice(0,1),groupings1:_EXPLORER_DATASET.groupings_old.slice(1,3),groupings2:_EXPLORER_DATASET.groupings_old.slice(3,5),question:function(){var a;a=[];for(d in _EXPLORER_DATASET.question_old)a.push(_EXPLORER_DATASET.question_old[d]);return a}(),country:_EXPLORER_DATASET.country_old,regions:_EXPLORER_DATASET.regions_old},this.years=[2006,2008,2010,2012]):(c={groupings0:_EXPLORER_DATASET.groupings.slice(0,1),groupings1:_EXPLORER_DATASET.groupings.slice(1,2),groupings2:_EXPLORER_DATASET.groupings.slice(2,3),question:function(){var a;a=[];for(d in _EXPLORER_DATASET.question)a.push(_EXPLORER_DATASET.question[d]);return a}(),country:_EXPLORER_DATASET.country,regions:_EXPLORER_DATASET.regions},this.years=[2006,2008,2010,2012,2015]),this.$el.html(e(c)),a.empty().append(this.$el),this.$el.find(".group-toggler").bind("mouseover",this._hoverGroupToggle),this.$el.find(".group-toggler").bind("click",this._clickGroupToggle),this.$el.find(".region-toggler").bind("click",this._clickRegionToggle),this.$el.find(".group-toggler").bind("mouseout",function(a){return i.$el.find(".toggle-box").removeClass("hover")}),this.$el.find(".toggle-box").bind("click",this._clickBoxToggle),this.$el.find(".nav a").bind("click",this._expand_collapse),this.$el.find(".select-or-clear button").bind("click",this._select_or_clear),this.$el.find(".download-csv").bind("click",this._download),this.$el.find(".toggle-box").tooltip({placement:"left",delay:100,animation:!0}),h=this.region;for(f=0,g=h.length;f<g;f++)b=h[f],this.$el.find("#region-"+b).addClass("active");return this.$el.find("#accordion2").on("show",function(){return i.trigger("resizeStart"),$(".customize-link").html("&laquo; Hide options")}),this.$el.find("#accordion2").on("hide",function(){return i.trigger("resizeStart"),$(".customize-link").html("Customize Report &raquo;")})},b.prototype.calculateScore=function(a,b,c){var d,e,f,g,h;c==null&&(c=!1);if(b.length===0)return 0;d=0,e=0;for(g=0,h=b.length;g<h;g++)f=b[g],a[f]>=0&&(d+=a[f],e++);return e===0?-1:(c&&console.log("result",d,e,d/e,Math.round(d/e),b),d/e)},b.prototype.update=function(a,b,c){var d,f,g,h,i,j,k=this;c==null&&(c=!1),this.year=a,a!=="2015"?(f={groupings0:_EXPLORER_DATASET.groupings_old.slice(0,1),groupings1:_EXPLORER_DATASET.groupings_old.slice(1,3),groupings2:_EXPLORER_DATASET.groupings_old.slice(3,5),question:function(){var a;a=[];for(g in _EXPLORER_DATASET.question_old)a.push(_EXPLORER_DATASET.question_old[g]);return a}(),country:_EXPLORER_DATASET.country_old,regions:_EXPLORER_DATASET.regions_old},this.years=[2006,2008,2010,2012]):(f={groupings0:_EXPLORER_DATASET.groupings.slice(0,1),groupings1:_EXPLORER_DATASET.groupings.slice(1,2),groupings2:_EXPLORER_DATASET.groupings.slice(2,3),question:function(){var a;a=[];for(g in _EXPLORER_DATASET.question)a.push(_EXPLORER_DATASET.question[g]);return a}(),country:_EXPLORER_DATASET.country,regions:_EXPLORER_DATASET.regions},this.years=[2006,2008,2010,2012,2015]),this.$el.html(e(f)),this.$el.find(".group-toggler").bind("mouseover",this._hoverGroupToggle),this.$el.find(".group-toggler").bind("click",this._clickGroupToggle),this.$el.find(".region-toggler").bind("click",this._clickRegionToggle),this.$el.find(".group-toggler").bind("mouseout",function(a){return k.$el.find(".toggle-box").removeClass("hover")}),this.$el.find(".toggle-box").bind("click",this._clickBoxToggle),this.$el.find(".nav a").bind("click",this._expand_collapse),this.$el.find(".select-or-clear button").bind("click",this._select_or_clear),this.$el.find(".download-csv").bind("click",this._download),this.$el.find(".toggle-box").tooltip({placement:"left",delay:100,animation:!0});if(c)this.$el.find("#region-0").click();else{j=this.region;for(h=0,i=j.length;h<i;h++)d=j[h],this.$el.find("#region-"+d).addClass("active")}this.$el.find("#accordion2").on("show",function(){return k.trigger("resizeStart"),$(".customize-link").html("&laquo; Hide options")}),this.$el.find("#accordion2").on("hide",function(){return k.trigger("resizeStart"),$(".customize-link").html("Customize Report &raquo;")}),this.$el.find("#group-0").click();if(b)return $("#collapseOne").addClass("in"),$("#accordion2 .accordion-toggle").addClass("collapsed"),$(".customize-link").html("&laquo; Hide options")},b.prototype._updated=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;this.questionSet=[],d=$(".toggle-box.select"),s=d||[];for(i=0,m=s.length;i<m;i++)c=s[i],this.questionSet.push($(c).attr("id").substr(7));this.dataset_unrounded=[],this.year!=="2015"?a=_EXPLORER_DATASET.country_old:a=_EXPLORER_DATASET.country;for(j=0,n=a.length;j<n;j++){b=a[j],e={country:b.name,alpha2:b.alpha2},t=this.years;for(k=0,o=t.length;k<o;k++){h=t[k];if(!("db_"+h in b))continue;f=this.calculateScore(b["db_"+h],this.questionSet),e[h]=f}this.dataset_unrounded.push(e)}this.dataset=[],u=this.dataset_unrounded;for(l=0,p=u.length;l<p;l++){g=u[l],e=$.extend({},g),v=this.years;for(r=0,q=v.length;r<q;r++){h=v[r];if(!(h in e))continue;e[h]=Math.round(e[h])}this.dataset.push(e)}return this.trigger("update",this.dataset,this.questionSet,this.region,this.dataset_unrounded)},b.prototype._select_or_clear=function(a){var b;return this._setSubtitle(),this.$el.find(".group-toggler").removeClass("active"),b=$(a.delegateTarget),b.hasClass("select")?$(".toggle-box").addClass("select"):b.hasClass("clear")&&$(".toggle-box").removeClass("select"),this._updated()},b.prototype._expand_collapse=function(a){var b,c;return a.preventDefault(),b=this.$el.find(".inner"),c=$(a.delegateTarget).parents("li"),this.$el.find(".nav li").removeClass("active"),c.addClass("active"),c.hasClass("more-options")?(this.trigger("resizeStart"),b.find("> .more").show(200),b.find("> .less").hide(200)):c.hasClass("less-options")&&(this.trigger("resizeStart"),this.$el.find(".inner .group-toggler:first").click(),this.$el.find(".inner .region-toggler:first").click(),b.find("> .more").hide(200),b.find("> .less").show(200)),!1},b.prototype._setSubtitle=function(a){return a==null&&(a="Custom Report"),this.$el.find(".subtitle").html(a)},b.prototype._hoverGroupToggle=function(a){var b,c;return b=$(a.delegateTarget),c=b.attr("id"),$("#toggle-boxes ."+c).addClass("hover")},b.prototype._clickGroupToggle=function(a){var b,c,d,e,f;return a.preventDefault(),c=$(a.delegateTarget),d=c.attr("id"),f=this.$el.find("#toggle-boxes"),this.$el.find(".group-toggler").hasClass("active")?b=this.$el.find(".group-toggler.active").parents("ul:first"):f.find(".toggle-box").removeClass("select"),c.hasClass("active")?(c.removeClass("active"),f.find(" ."+d).removeClass("select")):(b&&!b.is(c.parents("ul:first"))&&b.find(".group-toggler.active").each(function(){var a;return a=$(this).attr("id"),f.find(" ."+a).removeClass("select"),$(this).removeClass("active")}),c.addClass("active"),f.find(" ."+d).addClass("select")),e=this.$el.find(".group-toggler.active"),e.length===1?this._setSubtitle(e.text()):this._setSubtitle(),this._updated(),!1},b.prototype._clickRegionToggle=function(a){var b,c,d;return a.preventDefault(),b=$(a.delegateTarget),d=parseInt(b.attr("id").replace("region-","")),d===0?(this.region=[0],this.$el.find(".region-toggler").removeClass("active"),b.addClass("active")):b.hasClass("active")?(b.removeClass("active"),c=this.region.indexOf(d),c>=0&&this.region.splice(c,1),this.region.length===0&&(this.region.push(0),this.$el.find("#region-0").addClass("active"))):(this.$el.find("#region-0").hasClass("active")&&(this.$el.find("#region-0").removeClass("active"),c=this.region.indexOf(0),c>=0&&this.region.splice(c,1)),this.region.push(d),b.addClass("active")),this._updated(),!1},b.prototype._clickBoxToggle=function(a){var b;return a.preventDefault(),b=$(a.delegateTarget),b.hasClass("select")?b.removeClass("select"):b.addClass("select"),this._setSubtitle(),this.$el.find(".group-toggler").removeClass("active"),this._updated(),!1},b.prototype._writeLine=function(a,b){var c,d,e;for(d=0,e=b.length;0<=e?d<e:d>e;0<=e?d++:d--)c=b[d]||"",assert(!(i.call(c,'"')>=0),"Cannot encode string: "+c),i.call(c,",")>=0&&(b[d]='"'+c+'"');return a.push(b.join(","))},b.prototype._number_to_letter=function(a){return"The given letters in the source data arent always there. \n'q102l' does not exist while 'q102' does.\nTherefore it is safer to use this technique to extract a letter...",assert(a===-1||a===0||a===33||a===67||a===100,"Invalid value: "+a),{"-1":"e",0:"d",33:"c",67:"b",100:"a"}[a]},b.prototype._csvAnswers=function(a,b,c){var d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;this.year!=="2015"?(h=_EXPLORER_DATASET.regions_old,g=_EXPLORER_DATASET.country_old,d=["2006","2008","2010","2012"]):(h=_EXPLORER_DATASET.regions,g=_EXPLORER_DATASET.country,d=["2015"]),k=[],j=["COUNTRY","COUNTRY_NAME","YEAR","SCORE"];for(u=0,y=c.length;u<y;u++)s=c[u],j.push(s.toString());for(v=0,z=c.length;v<z;v++)s=c[v],j.push(s+"l");this._writeLine(k,j),q={};for(w=0,A=g.length;w<A;w++)s=g[w],q[s.alpha2]=s;o=[];for(x=0,B=b.length;x<B;x++){m=b[x],M=h[m].contains;for(H=0,C=M.length;H<C;H++)e=M[H],o.push(e)}for(I=0,D=a.length;I<D;I++){f=a[I];if(N=f.alpha2,i.call(o,N)<0)continue;p=$(".year-selector button.active").attr("data-year")||$('input[name="downloadyear"]:checked').val(),$("#datasheet-toggles button.active").attr("data-year")==="2006"&&(p="all"),i.call(d,p)>=0?p=[p]:p=d;for(J=0,E=p.length;J<E;J++){t=p[J];if(!(t in f))continue;n=[f.alpha2,f.country,t,f[t]];for(K=0,F=c.length;K<F;K++)l=c[K],n.push(q[f.alpha2]["db_"+t][l]);for(L=0,G=c.length;L<G;L++)l=c[L],r=q[f.alpha2]["db_"+t][l],n.push(this._number_to_letter(r));assert(n.length===j.length),this._writeLine(k,n)}}return k},b.prototype._download=function(a){var b,c;return b=this._csvAnswers(this.dataset,this.region,this.questionSet).join("\n"),c="data:application/csv;charset=utf-8,"+encodeURIComponent(b),$(".download-csv").attr({download:"custom-budget-report.csv",href:c,target:"_blank"})},b}(Backbone.View),c.exports=new a})).call(this)}),require.register("views/templates/availability_row",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<tr>\n    <td class="country"><a href="#profile/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'">',h=c.name,g=h||b.name,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"name",{hash:{}})),f+=m(g)+'</a></td>\n    <td class="flag"><img src="images/flags/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'.GIF"/></td>\n    <td class="score">',h=c.score,g=h||b.score,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"score",{hash:{}})),f+=m(g)+'</td>\n    <td class="dot"><img src="images/dot/',h=c.prebudgetstatement,g=h||b.prebudgetstatement,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"prebudgetstatement",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.executivesbudgetproposal,g=h||b.executivesbudgetproposal,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"executivesbudgetproposal",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.enactedbudget,g=h||b.enactedbudget,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"enactedbudget",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.citizensbudget,g=h||b.citizensbudget,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"citizensbudget",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.inyearreports,g=h||b.inyearreports,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"inyearreports",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.midyearreview,g=h||b.midyearreview,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"midyearreview",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.yearendreport,g=h||b.yearendreport,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"yearendreport",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.auditreport,g=h||b.auditreport,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"auditreport",{hash:{}})),f+=m(g)+'.png"/></td>\n</tr>\n',f})}),require.register("views/templates/download_files",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n  <table class="table table-bordered">\n      <tr class="first-row"><th class="blank" style="width: 300px;"></th><th colspan="2" style="text-align: center;">2006-2012</th><th colspan="2" style="text-align: center;">2015</th></tr>\n      <tr><th class="blank"></th><th style="text-align: right;">Format</th><th>Filename</th><th style="text-align: right;">Format</th><th>Filename</th></tr>\n      <tr>\n        <td rowspan="3"><strong>FULL DATASETS</strong><br />encompassing all Open Budget Surveys published by the International Budget Partnership, are available in multiple formats.</td>\n      ',i=c.excel,e=i||a.excel,f=c.each,j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n      </tr>\n      <tr>\n      ",i=c.csv,e=i||a.csv,f=c.each,j=k.program(4,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n      </tr>\n      <tr>\n      ",i=c.json,e=i||a.json,f=c.each,j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n      </tr>\n  </table>\n",d}function q(a,b){var d="",e;return d+='\n        <td style="text-align: right;">',i=c.format,e=i||a.format,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"format",{hash:{}})),d+=o(e)+'</td><td><a href="downloads/',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+'">',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+"</a> (",i=c.size,e=i||a.size,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"size",{hash:{}})),d+=o(e)+")</td>\n      ",d}function r(a,b){var d="",e;return d+='\n        <td style="text-align: right;">',i=c.format,e=i||a.format,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"format",{hash:{}})),d+=o(e)+'</td><td><a href="downloads/',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+'">',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+"</a> (",i=c.size,e=i||a.size,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"size",{hash:{}})),d+=o(e)+")</td>\n      ",d}function s(a,b){var d="",e;return d+='\n        <td style="text-align: right;">',i=c.format,e=i||a.format,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"format",{hash:{}})),d+=o(e)+'</td><td><a href="downloads/',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+'">',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+"</a> (",i=c.size,e=i||a.size,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"size",{hash:{}})),d+=o(e)+")</td>\n      ",d}function t(a,b){return'\n  <table class="table table-bordered">\n      <tr class="first-row"><th class="blank" style="width: 300px;"></th><th colspan="2" style="text-align: center;">2006-2012</th><th colspan="2" style="text-align: center;">2015</th></tr>\n      <tr><th class="blank"></th><th style="text-align: right;">Format</th><th>Filename</th><th style="text-align: right;">Format</th><th>Filename</th></tr>\n      <tr>\n        <td rowspan="3"><strong>STATISTICAL FILES</strong><br />complement the datasets, and have been prepared and made available for researchers here.</td>\n        <td style="text-align: right;">Excel</td><td><a href="downloads/OBI 2006-2012 ALL for web.xlsx">Full Excel Source</a> (649kb)</td>\n        <td style="text-align: right;">Excel</td><td><a href="downloads/OBI 2006-2015 ALL for web.xlsx">Full Excel Source</a> (736kb)</td>\n      </tr>\n      <tr>\n        <td style="text-align: right;">PDF</td><td><a href="downloads/OBI 2006-2012 dataset codebook.pdf">Dataset Codebook</a> (343kb)</td>\n        <td style="text-align: right;">PDF</td><td><a href="downloads/OBI 2006-2015 dataset codebook.pdf">Dataset Codebook</a> (1.6mb)</td>\n      </tr>\n      <tr>\n        <td style="text-align: right;">STATA</td><td><a href="downloads/OBI 2006-2012 dataset for web.dta">STATA package</a> (408kb)</td>\n        <td style="text-align: right;">STATA</td><td><a href="downloads/OBI 2006-2015 dataset for web.dta">STATA package</a> (532kb)</td>\n      </tr>\n  </table>\n'}function u(a,b){return'\n  <table class="table table-bordered comp">\n      <tr>\n        <td style="width: 450px;">A subset of 84 <strong>FULLY COMPARABLE QUESTIONS</strong><br />accross <strong>all</strong> rounds of the Open Budget Survey (2006-2015),<br />is available here.</td>\n        <td><a href="downloads/ibp_data_comparable.xlsx">Excel</a> (180kb)</td>\n        <td><a href="downloads/ibp_data_csv_comparable.zip">CSV</a> (244kb)</td>\n        <td><a href="downloads/ibp_data_comparable.json">JSON</a> (612kb)</td>\n      </tr>\n  </table>\n'}function v(a,b){return'\n<div>\n  <div class="download-data1">\n    <p><strong>CUSTOM REPORTS CAN BE SAVED!</strong></p>\n\n    <p>The customized reports generated in your browser, by selecting year and\n    questions/subsections of the Survey (see the “Customize Report” above),\n    can be saved as CSVs.</p>\n\n    <p><strong>How?</strong> Select the Survey year or period, and click on "Save To Disk" below. You can also click in the "Customize Report" textbox on the right hand side of this page, or copy/paste the contents of the textbox.</p>\n\n    <p class="dl-years"><span class="dl-years-info">Select year:</span>\n    <label class="radio inline">\n      <input type="radio" name="downloadyear" value="2006">\n        2006\n    </label>\n    <label class="radio inline">\n      <input type="radio" name="downloadyear" value="2008">\n        2008\n    </label>\n    <label class="radio inline">\n      <input type="radio" name="downloadyear" value="2010">\n        2010\n    </label>\n    <label class="radio inline">\n      <input type="radio" name="downloadyear" value="2012">\n        2012\n    </label>\n    <label class="radio inline">\n      <input type="radio" name="downloadyear" value="2015" checked>\n        2015\n    </label>\n    </p>\n    <p class="dl-years"><span class="dl-years-info">or</span>\n    <label class="radio inline">\n      <input type="radio" name="downloadyear" value="all">\n        2006-2012\n    </label>\n    <label class="radio inline">\n      <input type="radio" name="downloadyear" value="2015">\n        2015\n    </label>\n    </p>\n\n    <p id="downloadify">\n      <b>"Save To Disk" not available. (Requires Flash 10).</b><br/> This file cannot be downloaded automatically: Click on the textbox, then use cut-and-paste to save the contents into a text file on your computer.\n    </p>\n  </div>\n  <div class="download-data2">\n    <p><small>This preview is based on the specific data (survey subsections, questions, world regions) selected in the “Customize report” section above.</small></p>\n    <textarea id="custom-csv"" readonly>\n      Loading...\n    </textarea>\n  </div>\n</div>\n'}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;i=c.fd,g=i||b.fd,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n\n",i=c.sf,g=i||b.sf,h=c["if"],j=k.program(8,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n\n",i=c.cq,g=i||b.cq,h=c["if"],j=k.program(10,u,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n\n",i=c.cr,g=i||b.cr,h=c["if"],j=k.program(12,v,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n\n<div class="clearfix"></div>\n',f})}),require.register("views/templates/explorer",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div id="report-generator">\n</div>\n<div id="explorer">\n</div>\n\n'})}),require.register("views/templates/page/availability",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="document-availability">\n    <h2>Public Availability of Budget Documents</h2>\n\n    <div class="col4">\n      <table id="availability-key">\n        <tr>\n            <th colspan="2">Key</th>\n            </tr>\n            <tr>\n                <td class="dot"><img src="images/dot/PW.png"/></td>\n                <td class="text">Available to the public</td>\n            </tr>\n            <tr>\n                <td class="dot"><img src="images/dot/IU.png"/></td>\n                <td class="text">Available for internal use</td>\n            </tr>\n            <tr>\n                <td class="dot"><img src="images/dot/NP.png"/></td>\n                <td class="text">Not produced</td>\n            </tr>\n      </table>\n      <div id="region">\n          <h6><img src="images/world.png"> Regions</h6>\n          <ul id="av-region-toggler">\n              <li><a id="region-0" class="av-region-toggler active" href="#">Entire World</a></li>\n              <li><a id="region-1" class="av-region-toggler" href="#">East Asia &amp; Pacific</a></li>\n              <li><a id="region-2" class="av-region-toggler" href="#">Eastern Europe</a></li>\n              <li><a id="region-3" class="av-region-toggler" href="#">Central Asia</a></li>\n              <li><a id="region-4" class="av-region-toggler" href="#">Latin America &amp; Caribbean</a></li>\n              <li><a id="region-5" class="av-region-toggler" href="#">Middle East &amp; North Africa</a></li>\n              <li><a id="region-6" class="av-region-toggler" href="#">South Asia</a></li>\n              <li><a id="region-7" class="av-region-toggler" href="#">Sub-Saharan Africa</a></li>\n              <li><a id="region-8" class="av-region-toggler" href="#">Western Europe &amp; the U.S.</a></li>\n          </ul>\n        </div>\n    </div>\n    <div class="col8">\n        <div class="year-selector btn-group" id="year-toggles">\n            <button data-year="2006" class="btn">2006</button>\n            <button data-year="2008" class="btn">2008</button>\n            <button data-year="2010" class="btn">2010</button>\n            <button data-year="2012" class="btn">2012</button>\n            <button data-year="2015" class="btn">2015</button>\n        </div>\n        <table id="availability" class="table table-striped table-condensed">\n            <thead>\n                <tr>\n                    <td class="country">&nbsp;</td>\n                    <td class="flag">&nbsp;</td>\n                    <td class="score">Open Budget Index</td>\n                    <td class="dot">Pre-Budget Statement</td>\n                    <td class="dot">Executive\'s Budget Proposal</td>\n                    <td class="dot">Enacted Budget</td>\n                    <td class="dot">Citizens Budget</td>\n                    <td class="dot">In-Year Reports</td>\n                    <td class="dot">Mid-Year Review</td>\n                    <td class="dot">Year-End Report</td>\n                    <td class="dot">Audit Report</td>\n                </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n    <div class="clearfix"></div>\n</div>'})}),require.register("views/templates/page/download",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div>\n  <h2>Download Data</h2>\n</div>\n\n<div class="dl-nav-select-outer">\n<h3>Download:&nbsp;&nbsp;\n<select class="dl-nav-select">\n<option value="">Choose one...</option>\n<option value="fd">Full datasets</option>\n<option value="sf">Statistical files</option>\n<option value="cq">Comparable questions</option>\n<option value="cr">Custom reports</option>\n</select></h3>\n</div>\n\n<div id="dl-selection">\n  <div id="dl-mode">\n  </div>\n</div>\n<div class="clearfix"></div>\n'})}),require.register("views/templates/page/map",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="year-selector btn-group" id="map-toggles">\n    <button data-year="2006" class="btn">2006</button>\n    <button data-year="2008" class="btn">2008</button>\n    <button data-year="2010" class="btn">2010</button>\n    <button data-year="2012" class="btn">2012</button>\n    <button data-year="2015" class="btn">2015</button>\n</div>\n<div id="map" class="pull-left"></div>\n<div id="map-gradient" class="pull-left"></div>\n<div id="map-gradient-label" class="pull-left">\n  <p class="first">100</p>\n  <p>80</p>\n  <p>60</p>\n  <p>40</p>\n  <p class="penultimate">20</p>\n  <p>0</p>\n</div>\n<div class="clearfix"></div>\n'})}),require.register("views/templates/page/participation",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n            <option value="',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">',i=c.country,e=i||a.country,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"country",{hash:{}})),d+=o(e)+"</option>\n            ",d}function q(a,b){var d="",e;return d+='\n                <th class="col2" title="<table class=\'participation-tooltip\'>\n                    <tr><th><b>Question ',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+"</b></th></tr>\n                    <tr><td>",i=c.text,e=i||a.text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"text",{hash:{}})),d+=o(e)+'</td></tr>\n                </table>">\n                <a href="#" class="sortbyname" data-sort="',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'"><span class="text">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'</span> <span class="caret"></span></a></th>\n                ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="public-participation">\n    <h2>Public Participation in the Budget Process</h2>\n    <div class="year-selector btn-group">\n        <button data-year="2015" class="btn active">2015</button>\n    </div>\n    <div class="country-nav-select-outer">\n        <h4>\n        <select id="select-country" class="country-nav-select">\n            <option value="">Find a country...</option>\n            ',i=c.countries,g=i||b.countries,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n        </select>\n        </h4>\n        <h4>\n        <select id="select-region" class="country-nav-select">\n            <option value="">Select a region...</option>\n            <option value="region-0">Entire World</option>\n            <option value="region-1">East Asia &amp; Pacific</option>\n            <option value="region-2">Eastern Europe</option>\n            <option value="region-3">Central Asia</option>\n            <option value="region-4">Latin America &amp; Caribbean</option>\n            <option value="region-5">Middle East &amp; North Africa</option>\n            <option value="region-6">South Asia</option>\n            <option value="region-7">Sub-Saharan Africa</option>\n            <option value="region-8">Western Europe &amp; the U.S.</option>\n        </select>\n        </h4>\n        <p class="participation-links">\n            <a href="http://www.fiscaltransparency.net/resources-all/">Public participation case studies &raquo;</a>\n        </p>\n    </div>\n    <table id="participation-table">\n        <thead>\n            <tr class="table-header">\n                <th class="col1" colspan="2" rowspan="2"><a href="#" class="sortbyname" data-sort="name"><span class="text">Country</span> <span class="caret"></span></a></th>\n                <th class="col2" rowspan="2"><a href="#" class="sortbyname" data-sort="score"><span class="text">Score</span> <span class="caret"></span></a></th>\n                <th class="help-header" colspan="16"><span class="text">Questions (Click on each answer to read more about countries’ practices)</span></th>\n            </tr>\n            <tr class="table-header">\n                ',i=c.questions,g=i||b.questions,h=c.each,j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n            </tr>\n        </thead>\n        <tbody>\n        </tbody>\n    </table>\n</div>\n",f})}),require.register("views/templates/page/profile",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n<option value="',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</option>\n",d}function q(a,b){return"\n  <h3>Select a country...</h3>\n"}function r(a,b){var d="",e,f;d+="\n  ",i=c.main_website_url,e=i||a.main_website_url,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n  <h3>Country Datasheet: ",i=c.data,e=i||a.data,f=c["with"],j=k.program(9,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" (",i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+')</h3>\n  <table class="percentages">\n  </table>\n  <div id="profile-mode">\n  </div>\n  <div style="position: relative;">\n    <div class="details"></div>\n    <div class="question-box">\n    </div>\n  </div>\n  <div class="clearfix"></div>\n',d}function s(a,b){var d="",e,f;d+='\n    <a class="main-website-link" href="',i=c.main_website_url,e=i||a.main_website_url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"main_website_url",{hash:{}})),d+=o(e)+'">View ',i=c.data,e=i||a.data,f=c["with"],j=k.program(7,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" on IBP Site &raquo;</a>\n  ",d}function t(a,b){var d;return i=c.name,d=i||a.name,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"name",{hash:{}})),o(d)}function u(a,b){var d;return i=c.name,d=i||a.name,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"name",{hash:{}})),o(d)}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="surveys-information">\n  <p>The Open Budget Survey methodology \n    and questionnaire underwent some revisions since the 2012 \n    Survey round, which among other things affected the number and \n    numbering of the questions. For clarity and simplicity, IBP \n    therefore decided to present the results from previous Survey \n    rounds under a separate section. For further details, go to \n    <a href="http://internationalbudget.org/">IBP website</a>.\n  </p>\n</div>\n<div class="year-selector btn-group" id="datasheet-toggles">\n    <button data-year="2006" class="btn">2006-2012 Surveys</button>\n    <button data-year="2015" class="btn">2015 Survey</button>\n</div>\n<div class="country-nav-select-outer">\n<h3>Country:&nbsp;&nbsp;\n<select class="country-nav-select">\n<option value="">Select a country...</option>\n',i=c.countries,g=i||b.countries,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n</select></h3>\n</div>\n<div id="country-profile">\n',i=c.empty,g=i||b.empty,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.program(5,r,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</div>\n",f})}),require.register("views/templates/page/rankings",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="country-rankings">\n    <div class="year-selector btn-group" id="rankings-toggles">\n        <button data-year="2006" class="btn">2006</button>\n        <button data-year="2008" class="btn">2008</button>\n        <button data-year="2010" class="btn">2010</button>\n        <button data-year="2012" class="btn">2012</button>\n        <button data-year="2015" class="btn">2015</button>\n    </div>\n    <table id="rankings-table">\n        <thead>\n            <tr>\n                <th class="col1" colspan="2"><a href="#" class="sortbyname" data-sortbyname="true"><span class="text">Name</span> <span class="caret"></span></a></th>\n                <th class="col2" colspan="2"><a href="#" class="sortbyname" data-sortbyname="false"><span class="text">Score</span> <span class="caret"></span></a></th>\n            </tr>\n        </thead>\n        <tbody></tbody>\n    </table>\n</div>\n'})}),require.register("views/templates/page/rawdata",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+="\n      <li>",i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+"</li>\n    ",d}function q(a,b){var d="",e,f;d+='\n    <div class="question">\n      ',i=c.in_index,e=i||a.in_index,f=c["if"],j=k.program(4,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+='\n      <span class="text">\n          <span class="number">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+": </span> \n          ",i=c.text,e=i||a.text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"text",{hash:{}})),d+=o(e)+'\n          <a class="expand" href="#">[...]</a>\n      </span>\n      <span class="answer a"><span class="prefix">A: </span>',i=c.a,e=i||a.a,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a",{hash:{}})),d+=o(e)+'</span>\n      <span class="answer b"><span class="prefix">B: </span>',i=c.b,e=i||a.b,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b",{hash:{}})),d+=o(e)+'</span>\n      <span class="answer c"><span class="prefix">C: </span>',i=c.c,e=i||a.c,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c",{hash:{}})),d+=o(e)+"</span>\n      ",i=c.d,e=i||a.d,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n      ",i=c.e,e=i||a.e,f=c["if"],j=k.program(8,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n    </div>\n    ",d}function r(a,b){return'<span class="label">index</span>'}function s(a,b){var d="",e;return d+='<span class="answer d"><span class="prefix">D: </span>',i=c.d,e=i||a.d,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d",{hash:{}})),d+=o(e)+"</span>",d}function t(a,b){var d="",e;return d+='<span class="answer e"><span class="prefix">E: </span>',i=c.e,e=i||a.e,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e",{hash:{}})),d+=o(e)+"</span>",d}function u(a,b){var d="",e,f;d+='\n        <h4 style="border-bottom: 1px solid #000; margin-top: 15px;">',i=c.by,e=i||a.by,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"by",{hash:{}})),d+=o(e)+"</h4>\n        ",i=c.entries,e=i||a.entries,f=c.each,j=k.program(11,v,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n    ",d}function v(a,b){var d="",e,f;d+='\n            <h6 style="margin-bottom: 0;">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+":</h6>\n            <p>",i=c.qs,e=i||a.qs,f=c.each,j=k.program(12,w,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="</p>\n        ",d}function w(a,b){var c="",d;return d=a,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this",{hash:{}})),c+=o(d)+", ",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="row">\n<div class="span2">\n    <h3>Countries</h3>\n    <ul>\n    ',i=c.country,g=i||b.country,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    </ul>\n</div>\n<div class="span6">\n    <h3>Questions</h3>\n    ',i=c.question,g=i||b.question,h=c.each,j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n</div>\n<div class="span4">\n    <h3>Groupings</h3>\n    ',i=c.groupings,g=i||b.groupings,h=c.each,j=k.program(10,u,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</div>\n</div>\n",f})}),require.register("views/templates/page/splash",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="splash">\n  <a href="#map" class="banner">\n    The <strong>Open Budget Survey</strong> is a comprehensive analysis and survey that evaluates whether governments give the public access to budget information and opportunities to participate in the budget process at the national level. The Survey also assesses the capacity and independence of formal oversight institutions. The IBP works with civil society partners in 100 countries to collect the data for the Survey.\n  </a>\n  <div class="row">\n    <div class="span3">\n      <a class="pod rankings" href="#rankings">To easily measure the commitment to transparency, IBP created the <strong>Open Budget Index</strong> from the Survey. </a>\n    </div>\n    <div class="span3">\n      <a class="pod timeline" href="#timeline">The <strong>Open Budget Index</strong> allows for comparisons among countries and across years.\n      </a>\n    </div>\n    <div class="span3">\n      <a class="pod calculator" href="#profile">Use the <strong>2017 calculator</strong> to predict the outcome of the next survey and see where transparency can improve.</a>\n    </div>\n    <div class="span3">\n      <a class="pod participation" href="#participation">In addition to assessing public access to budget information and the capacity and independence of formal oversight institutions, the survey evaluates <strong>whether governments give the public opportunities to participate in the budget process</strong> at the national level.</a>\n    </div>\n  </div>\n</div>\n'})}),require.register("views/templates/page/timeline",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="timeline-header">\n    <h2 class="pull-left">Timeline</h2>\n    <h4 class="pull-left">View:</h4>\n    <div class="timeline-toggle pull-left">\n      <label class="radio">\n        <input type="radio" name="timeline" value="rankings" checked>\n        Rankings\n      </label>\n      <label class="radio">\n        <input type="radio" name="timeline" value="scores">\n        Open Budget Index\n      </label>\n    </div>\n    <div class="clearfix"></div>\n</div>\n<div id="timeline-columns"></div>\n'})}),require.register("views/templates/participation_comments",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='<div class="answer"><b>A: </b>',i=c.a,e=i||a.a,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a",{hash:{}})),d+=o(e)+"</div>",d}function q(a,b){var d="",e;return d+='<div class="answer"><b>B: </b>',i=c.b,e=i||a.b,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b",{hash:{}})),d+=o(e)+"</div>",d}function r(a,b){var d="",e;return d+='<div class="answer"><b>C: </b>',i=c.c,e=i||a.c,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c",{hash:{}})),d+=o(e)+"</div>",d}function s(a,b){var d="",e;return d+='<div class="answer"><b>D: </b>',i=c.d,e=i||a.d,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d",{hash:{}})),d+=o(e)+"</div>",d}function t(a,b){var d="",e;return d+='<div class="answer"><b>E: </b>',i=c.e,e=i||a.e,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e",{hash:{}})),d+=o(e)+"</div>",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<td class="comments-template" colspan="19">\n  <div class="question">\n      <div class="question-text">\n        <b>Question ',i=c.number,g=i||b.number,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"number",{hash:{}})),f+=o(g)+":</b> ",i=c.text,g=i||b.text,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"text",{hash:{}})),f+=o(g)+"\n      </div>\n      ",i=c.a,g=i||b.a,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.b,g=i||b.b,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.c,g=i||b.c,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.d,g=i||b.d,h=c["if"],j=k.program(7,s,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n      ",i=c.e,g=i||b.e,h=c["if"],j=k.program(9,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n  </div>\n  <div class="comments">\n      <div class="comments-text">\n        <b>Researcher\'s Comment and Citation Supporting the Response</b>\n      </div>\n      <p>',i=c.comments,g=i||b.comments,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"comments",{hash:{}})),f+=o(g)+"</p>\n  </div>\n</td>",f})}),require.register("views/templates/participation_row",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+='\n    <tr id="',h=c.alpha2,e=h||a.alpha2,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"alpha2",{hash:{}})),d+=n(e)+'" data-country="',h=c.country,e=h||a.country,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"country",{hash:{}})),d+=n(e)+'">\n        <td class="country"><a href="#profile/',h=c.alpha2,e=h||a.alpha2,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"alpha2",{hash:{}})),d+=n(e)+'">',h=c.country,e=h||a.country,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"country",{hash:{}})),d+=n(e)+'</a></td>\n        <td class="flag"><img src="images/flags/',h=c.alpha2,e=h||a.alpha2,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"alpha2",{hash:{}})),d+=n(e)+'.GIF"/></td>\n        <td class="score">',h=c.score,e=h||a.score,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"score",{hash:{}})),d+=n(e)+"</td>\n        ",h=c.question,e=h||a.question,f=c.each,i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+='\n    </tr>\n    <tr class="comments-box ',h=c.alpha2,e=h||a.alpha2,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"alpha2",{hash:{}})),d+=n(e)+'">\n    </tr>\n',d}function p(a,b){var d="",e,f;d+='\n        <td class="letter inactive" data-question-number="',h=c.number,e=h||a.number,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"number",{hash:{}})),d+=n(e)+'">',h=c.letter,e=h||a.letter,f=c["if"],i=j.program(3,q,b),i.hash={},i.fn=i,i.inverse=j.program(5,r,b),e=f.call(a,e,i);if(e||e===0)d+=e;return d+="</td>\n        ",d}function q(a,b){var c="",d;return c+='<img src="images/letter/',d=a.letter,typeof d===k?d=d.call(a,{hash:{}}):d===m&&(d=l.call(a,"this.letter",{hash:{}})),c+=n(d)+'.png"/>',c}function r(a,b){return"-"}c=c||a.helpers;var f,g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;return h=c.countries,f=h||b.countries,g=c.each,i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,f=g.call(b,f,i),f||f===0?f:""})}),require.register("views/templates/profile_badges",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){return'\n<div>\n  <a id="profile-toggle" class="inactive" href="#">Show 2017 Calculator »</a>\n</div>\n'}function q(a,b){var c="",d;return c+='\n    <div class="year-box year-',d=a,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this",{hash:{}})),c+=o(d)+' badge">\n      <span class="top">',d=a,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this",{hash:{}})),c+=o(d)+'</span><span class="bottom"></span>\n    </div>\n  ',c}function r(a,b){return'\n    <div class="year-box year-2017 badge badge-success future">\n      <span class="top">2017</span><span class="bottom"></span>\n    </div>\n  '}function s(a,b){return'\n<div>\n  <p class="explanation future">Click on the letters below to calculate the possible outcome of the 2017 survey.<br/>Changing the value of a question automatically updates the score.</p>\n</div>\n'}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;i=c.last,g=i||b.last,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n<div class="scores">\n  ',i=c.years,g=i||b.years,h=c.each,j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.last,g=i||b.last,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n  <div class="clearfix"></div>\n</div>\n<br/>\n',i=c.last,g=i||b.last,h=c["if"],j=k.program(7,s,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f})}),require.register("views/templates/profile_details",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+='\n      <th><span class="badge">',d=a,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this",{hash:{}})),c+=o(d)+"</span></th>\n    ",c}function q(a,b){var d="",e,f;d+="\n    ",i=c.questions,e=i||a.questions,f=c.each,j=k.program(4,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n  ",d}function r(a,b){var d="",e,f;d+='\n    <tr class="question-row" data-question-number="',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'">\n      <td class="number">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'</td>\n      <td class="letter">',i=c.l2015,e=i||a.l2015,f=c["if"],j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.program(7,t,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='</td>\n      <td class="space"></td>\n    </tr>\n    ',d}function s(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2015,e=i||a.l2015,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2015",{hash:{}})),d+=o(e)+'.png"/>',d}function t(a,b){return"-"}function u(a,b){var d="",e,f;d+="\n    ",i=c.questions,e=i||a.questions,f=c.each,j=k.program(10,v,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n  ",d}function v(a,b){var d="",e,f;d+='\n    <tr class="question-row" data-question-number="',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'">\n      <td class="number">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'</td>\n      <td class="letter">',i=c.l2006,e=i||a.l2006,f=c["if"],j=k.program(11,w,b),j.hash={},j.fn=j,j.inverse=k.program(13,x,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n      <td class="letter">',i=c.l2008,e=i||a.l2008,f=c["if"],j=k.program(15,y,b),j.hash={},j.fn=j,j.inverse=k.program(17,z,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n      <td class="letter">',i=c.l2010,e=i||a.l2010,f=c["if"],j=k.program(19,A,b),j.hash={},j.fn=j,j.inverse=k.program(21,B,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n      <td class="letter">',i=c.l2012,e=i||a.l2012,f=c["if"],j=k.program(23,C,b),j.hash={},j.fn=j,j.inverse=k.program(25,D,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='</td>\n      <td class="space"></td>\n    </tr>\n    ',d}function w(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2006,e=i||a.l2006,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2006",{hash:{}})),d+=o(e)+'.png"/>',d}function x(a,b){return"-"}function y(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2008,e=i||a.l2008,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2008",{hash:{}})),d+=o(e)+'.png"/>',d}function z(a,b){return"-"}function A(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2010,e=i||a.l2010,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2010",{hash:{}})),d+=o(e)+'.png"/>',d}function B(a,b){return"-"}function C(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2012,e=i||a.l2012,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2012",{hash:{}})),d+=o(e)+'.png"/>',d}function D(a,b){return"-"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='\n<table class="table table-condensed">\n  <tr>\n    <th></th>\n    ',i=c.years,g=i||b.years,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    <th class="space"></th>\n  </tr>\n  ',i=c.last,g=i||b.last,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.program(9,u,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</table>\n",f})}),require.register("views/templates/profile_details_future",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n  <tr class="question-row" data-question-number="',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'">\n    <td class="number">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'</td>\n    <td class="letter">',i=c.l2015,e=i||a.l2015,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n    <td class="letter multi">\n      ',i=c.l2015,e=i||a.l2015,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.program(8,t,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='\n    </td>\n    <td class="space"></td>\n  </tr>\n  ',d}function q(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2015,e=i||a.l2015,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2015",{hash:{}})),d+=o(e)+'.png"/>',d}function r(a,b){return"-"}function s(a,b){return'\n        <img src="images/letter/a.png" class="inactive" data-score="100"/>\n        <img src="images/letter/b.png" class="inactive" data-score="67"/>\n        <img src="images/letter/c.png" class="inactive" data-score="33"/>\n        <img src="images/letter/d.png" class="inactive" data-score="0"/>\n        <img src="images/letter/e.png" class="inactive" data-score="-1"/>\n      '}function t(a,b){return"\n        -\n      "}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='\n<table class="table table-condensed">\n  <tr>\n    <th></th>\n    <th><span class="badge">2015</span></th>\n    <th><span class="badge badge-success">2017</span></th>\n    <th class="space"></th>\n  </tr>\n  ',i=c.questions,g=i||b.questions,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</table>\n",f})}),require.register("views/templates/profile_percentages",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n  <tr>\n    <td class="year"><span class="badge">',i=c.year,e=i||a.year,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"year",{hash:{}})),d+=o(e)+':</span></td>\n    <td class="score">',i=c.not_defined,e=i||a.not_defined,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n    <td class="bar">\n      ',i=c.not_defined,e=i||a.not_defined,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.program(8,t,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n    </td>\n  </tr>\n",d}function q(a,b){return" "}function r(a,b){var d="",e;return d+="Score: ",i=c.score,e=i||a.score,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"score",{hash:{}})),d+=o(e),d}function s(a,b){return'\n        <div class="percentbar disabled">(Not surveyed)</div>\n      '}function t(a,b){var d="",e;return d+="\n        <div class=\"percentbar\" title=\"<table class='percentbar-tooltip'>\n        <tr><th colspan='4'>Share of questions by letter grade:</th></tr>\n        <tr class='row-a'><td class='letter'>A:</td><td class='left'>",i=c.a,e=i||a.a,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-b'><td class='letter'>B:</td><td class='left'>",i=c.b,e=i||a.b,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-c'><td class='letter'>C:</td><td class='left'>",i=c.c,e=i||a.c,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-d'><td class='letter'>D:</td><td class='left'>",i=c.d,e=i||a.d,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-e'><td class='letter'>E:</td><td class='left'>",i=c.e,e=i||a.e,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+'</td></tr>\n        </table>">\n          <div class="bg-e" style="width: ',i=c.e_width,e=i||a.e_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-d" style="width: ',i=c.d_width,e=i||a.d_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-c" style="width: ',i=c.c_width,e=i||a.c_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-b" style="width: ',i=c.b_width,e=i||a.b_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-a" style="width: ',i=c.a_width,e=i||a.a_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a_width",{hash:{}})),d+=o(e)+'%"></div>\n        </div>\n      ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;i=c.percentages,g=i||b.percentages,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}),require.register("views/templates/question_text",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='<div class="answer"><b>A: </b>',i=c.a,e=i||a.a,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a",{hash:{}})),d+=o(e)+"</div>",d}function q(a,b){var d="",e;return d+='<div class="answer"><b>B: </b>',i=c.b,e=i||a.b,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b",{hash:{}})),d+=o(e)+"</div>",d}function r(a,b){var d="",e;return d+='<div class="answer"><b>C: </b>',i=c.c,e=i||a.c,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c",{hash:{}})),d+=o(e)+"</div>",d}function s(a,b){var d="",e;return d+='<div class="answer"><b>D: </b>',i=c.d,e=i||a.d,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d",{hash:{}})),d+=o(e)+"</div>",d}function t(a,b){var d="",e;return d+='<div class="answer"><b>E: </b>',i=c.e,e=i||a.e,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e",{hash:{}})),d+=o(e)+"</div>",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="question-template">\n  <div class="question-text">\n    <b>Question ',i=c.number,g=i||b.number,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"number",{hash:{}})),f+=o(g)+":</b> ",i=c.text,g=i||b.text,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"text",{hash:{}})),f+=o(g)+"\n  </div>\n  ",i=c.a,g=i||b.a,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.b,g=i||b.b,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.c,g=i||b.c,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.d,g=i||b.d,h=c["if"],j=k.program(7,s,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.e,g=i||b.e,h=c["if"],j=k.program(9,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</div>\n",f})}),require.register("views/templates/rankings_row",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<tr>\n    <td class="country"><a href="#profile/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'">',h=c.country,g=h||b.country,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"country",{hash:{}})),f+=m(g)+'</a></td>\n    <td class="flag"><img src="images/flags/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'.GIF"/></td>\n    <td class="score">',h=c.score,g=h||b.score,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"score",{hash:{}})),f+=m(g)+"</td>\n    <td class=\"bar\">\n      <div class=\"percentbar\" title=\"<table class='percentbar-tooltip'>\n        <tr><th colspan='4'>Share of questions by letter grade:</th></tr>\n        <tr class='row-a'><td class='letter'>A:</td><td class='left'>",h=c.a,g=h||b.a,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"a",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-b'><td class='letter'>B:</td><td class='left'>",h=c.b,g=h||b.b,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"b",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-c'><td class='letter'>C:</td><td class='left'>",h=c.c,g=h||b.c,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"c",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-d'><td class='letter'>D:</td><td class='left'>",h=c.d,g=h||b.d,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"d",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-e'><td class='letter'>E:</td><td class='left'>",h=c.e,g=h||b.e,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"e",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+'</td></tr>\n        </table>">\n          <div class="bg-a" style="left: 0%; width: ',h=c.a_width,g=h||b.a_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"a_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-b" style="left: ',h=c.b_left,g=h||b.b_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"b_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.b_width,g=h||b.b_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"b_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-c" style="left: ',h=c.c_left,g=h||b.c_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"c_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.c_width,g=h||b.c_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"c_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-d" style="left: ',h=c.d_left,g=h||b.d_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"d_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.d_width,g=h||b.d_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"d_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-e" style="left: ',h=c.e_left,g=h||b.e_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"e_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.e_width,g=h||b.e_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"e_width",{hash:{}})),f+=m(g)+'%"></div>\n        </div>\n    </td>\n</tr>\n',f})}),require.register("views/templates/rankings_tooltip",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+" is a great place\n",f})}),require.register("views/templates/reportgenerator",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+="\n                    <h6>",i=c.by,e=i||a.by,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"by",{hash:{}})),d+=o(e)+"</h6>\n                    <ul>\n                      ",i=c.entries,e=i||a.entries,f=c.each,j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n                    </ul>\n                ",d}function q(a,b){var d="",e;return d+='\n                      <li><a href="#" class="group-toggler" id="group-',i=c.group_id,e=i||a.group_id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"group_id",{hash:{}})),d+=o(e)+'">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"</a></li>\n                      ",d}function r(a,b){var d="",e,f;d+="\n                        <h6>",i=c.by,e=i||a.by,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"by",{hash:{}})),d+=o(e)+"</h6>\n                        <ul>\n                          ",i=c.entries,e=i||a.entries,f=c.each,j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n                        </ul>\n                    ",d}function s(a,b){var d="",e;return d+='\n                          <li><a href="#" class="group-toggler" id="group-',i=c.group_id,e=i||a.group_id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"group_id",{hash:{}})),d+=o(e)+'">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"</a></li>\n                          ",d}function t(a,b){var d="",e,f;d+="\n                        <h6>",i=c.by,e=i||a.by,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"by",{hash:{}})),d+=o(e)+"</h6>\n                        <ul>\n                          ",i=c.entries,e=i||a.entries,f=c.each,j=k.program(8,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n                        </ul>\n                    ",d}function u(a,b){var d="",e;return d+='\n                          <li><a href="#" class="group-toggler" id="group-',i=c.group_id,e=i||a.group_id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"group_id",{hash:{}})),d+=o(e)+'">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"</a></li>\n                          ",d}function v(a,b){var d="",e,f;d+='\n                  <a href="#" class="toggle-box ',i=c.groups,e=i||a.groups,f=c.each,j=k.program(11,w,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='" id="toggle-',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+"\" title=\"<p class='question-tooltip'>",i=c.text,e=i||a.text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"text",{hash:{}})),d+=o(e)+'</p>">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+"</a>\n                ",d}function w(a,b){var c="",d;return d=a,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this",{hash:{}})),c+=o(d)+" ",c}function x(a,b){var d="",e;return d+='\n                  <li><a href="#" class="region-toggler" id="region-',i=c.region_index,e=i||a.region_index,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"region_index",{hash:{}})),d+=o(e)+'">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</a></li>\n                  ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="accordion" id="accordion2">\n  <div class="accordion-group">\n    <div class="accordion-heading">\n      <span class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">\n        <span class="pre-subtitle">Viewing: </span>\n        "<span class="subtitle"></span>"\n        <a class="customize-link" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">\n          Customize Report &raquo;\n        </a>\n      </span>\n    </div>\n    <div id="collapseOne" class="accordion-body collapse">\n      <div class="accordion-inner">\n          <div class="col1 grouplist">\n                ',i=c.groupings0,g=i||b.groupings0,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n\n                <div class="col11 grouplist">\n                    ',i=c.groupings1,g=i||b.groupings1,h=c.each,j=k.program(4,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n                </div>\n\n                <div class="col12 grouplist">\n                    ',i=c.groupings2,g=i||b.groupings2,h=c.each,j=k.program(7,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n                </div>\n            </div>\n            <div class="col3">\n                <div id="toggle-boxes">\n                ',i=c.question,g=i||b.question,h=c.each,j=k.program(10,v,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n                <div class="clearfix"></div>\n                <div class="select-or-clear">\n                    <button class="btn btn-primary btn-small select">Select All</button>\n                    <button class="btn btn-small clear">Clear All</button>\n                </div>\n                </div>\n            </div>\n            <div class="col4 grouplist">\n                <h6><img src="images/world.png"/> Regions</h6>\n                <ul>\n                  ',i=c.regions,g=i||b.regions,h=c.each,j=k.program(13,x,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n                </ul>\n                <div class="report-download">\n                    <button class="btn btn-primary btn-small btn-download"><a href="#" class="download-csv">Download Data</a></button>\n                </div>\n            </div>\n            <div class="clearfix"></div>\n      </div>\n    </div>\n  </div>\n</div>\n',f})}),require.register("views/templates/timeline_column",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n      <tr class="timeline-row-',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'" data-alpha2="',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">\n        <td class="timeline-cell-name"><a href="#profile/',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">',i=c.country,e=i||a.country,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"country",{hash:{}})),d+=o(e)+'</a></td>\n        <td class="timeline-cell-flag"><img src="images/flags/',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'.GIF"/></td>\n        <td class="timeline-cell-score">',i=c.score,e=i||a.score,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"score",{hash:{}})),d+=o(e)+'&nbsp;&nbsp;</td>\n        <td class="timeline-cell-rank">',i=c.rank,e=i||a.rank,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"rank",{hash:{}})),d+=o(e)+"</td>\n      </tr>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="timeline-column" id="timeline-column-',i=c.year,g=i||b.year,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"year",{hash:{}})),f+=o(g)+'">\n  <h4>',i=c.year,g=i||b.year,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"year",{hash:{}})),f+=o(g)+' Survey</h4>\n  <table>\n    <thead>\n      <tr>\n        <th class="timeline-cell-name">Country</th>\n        <th class="timeline-cell-flag"></th>\n        <th class="timeline-cell-score">Score</th>\n        <th class="timeline-cell-rank">Rank</th>\n      </tr>\n    </thead>\n    <tbody>\n    ',i=c.data,g=i||b.data,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n    </tbody>\n  </table>\n</div>\n\n",f})}),require.register("views/templates/timeline_column_abbr",function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n      <tr class="timeline-row-',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'" data-alpha2="',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">\n        <td class="timeline-cell-name abbr"><a href="#profile/',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'</a></td>\n        <td class="timeline-cell-flag"><img src="images/flags/',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'.GIF"/></td>\n        <td class="timeline-cell-score">',i=c.score,e=i||a.score,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"score",{hash:{}})),d+=o(e)+'&nbsp;&nbsp;</td>\n        <td class="timeline-cell-rank">',i=c.rank,e=i||a.rank,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"rank",{hash:{}})),d+=o(e)+"</td>\n      </tr>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="timeline-column" id="timeline-column-',i=c.year,g=i||b.year,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"year",{hash:{}})),f+=o(g)+'">\n  <h4>',i=c.year,g=i||b.year,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"year",{hash:{}})),f+=o(g)+' Survey</h4>\n  <table>\n    <thead>\n      <tr>\n        <th class="timeline-cell-name abbr">Country</th>\n        <th class="timeline-cell-flag"></th>\n        <th class="timeline-cell-score">Score</th>\n        <th class="timeline-cell-rank">Rank</th>\n      </tr>\n    </thead>\n    <tbody>\n    ',i=c.data,g=i||b.data,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n    </tbody>\n  </table>\n</div>\n\n",f})})